import{A as Z,B as ee,C as k,D as r,E as I,F as b,G as te,H as ie,I as M,J as y,K as w,L as oe,N as ne,O as ae,P as F,Q as re,R as q,S as se,T as de,U as ce,V as H,W as le,X as me,Y as j,a as V,aa as R,b as z,ba as B,c as C,ca as pe,da as ue,ea as $,fa as ge,ga as _e,h as p,i as u,j as G,k as d,ka as he,l as T,la as be,m as L,ma as N,o as f,oa as ve,p as Q,pa as fe,q as J,qa as xe,r as g,ra as Ce,s as a,sa as W,t as o,ta as Pe,u as E,ua as Se,v as P,w as _,x as l,y as K,z as X}from"./chunk-VRWM4YT2.js";function Ie(s,t){if(s&1){let e=P();a(0,"div",15)(1,"label",16),r(2,"Nombre del Mozo:"),o(),a(3,"input",17),w("ngModelChange",function(i){p(e);let c=l(2);return y(c.nombreMoso,i)||(c.nombreMoso=i),u(i)}),o()()}if(s&2){let e=l(2);d(3),M("ngModel",e.nombreMoso)}}function De(s,t){if(s&1){let e=P();a(0,"div",15)(1,"label",18),r(2,"Contrase\xF1a:"),o(),a(3,"input",19),w("ngModelChange",function(i){p(e);let c=l(2);return y(c.password,i)||(c.password=i),u(i)}),_("keyup.enter",function(){p(e);let i=l(2);return u(i.login())}),o()()}if(s&2){let e=l(2);d(3),M("ngModel",e.password)}}function Te(s,t){if(s&1&&(a(0,"div",20),r(1),o()),s&2){let e=l(2);d(),b(" ",e.errorMessage," ")}}function Ae(s,t){if(s&1){let e=P();a(0,"div",1),_("click",function(i){p(e);let c=l();return u(c.onOverlayClick(i))}),a(1,"div",2),_("click",function(i){return p(e),u(i.stopPropagation())}),a(2,"div",3)(3,"h3"),r(4,"Iniciar Sesi\xF3n"),o(),a(5,"button",4),_("click",function(){p(e);let i=l();return u(i.close())}),r(6,"\xD7"),o()(),a(7,"div",5)(8,"div",6)(9,"h4"),r(10,"Selecciona tu rol:"),o(),a(11,"div",7)(12,"button",8),_("click",function(){p(e);let i=l();return u(i.selectRole("caja"))}),a(13,"i",9),r(14,"\u{1F4B0}"),o(),a(15,"span"),r(16,"Caja"),o()(),a(17,"button",8),_("click",function(){p(e);let i=l();return u(i.selectRole("moso"))}),a(18,"i",9),r(19,"\u{1F37D}\uFE0F"),o(),a(20,"span"),r(21,"Mozo"),o()(),a(22,"button",8),_("click",function(){p(e);let i=l();return u(i.selectRole("cocina"))}),a(23,"i",9),r(24,"\u{1F468}\u200D\u{1F373}"),o(),a(25,"span"),r(26,"Cocina"),o()()()(),f(27,Ie,4,1,"div",10)(28,De,4,1,"div",10)(29,Te,2,1,"div",11),o(),a(30,"div",12)(31,"button",13),_("click",function(){p(e);let i=l();return u(i.close())}),r(32,"Cancelar"),o(),a(33,"button",14),_("click",function(){p(e);let i=l();return u(i.login())}),r(34," Iniciar Sesi\xF3n "),o()()()()}if(s&2){let e=l();d(12),k("active",e.selectedRole==="caja"),d(5),k("active",e.selectedRole==="moso"),d(5),k("active",e.selectedRole==="cocina"),d(5),g("ngIf",e.selectedRole==="moso"),d(),g("ngIf",e.selectedRole),d(),g("ngIf",e.errorMessage),d(4),g("disabled",!e.selectedRole||!e.password)}}var U=class s{constructor(t){this.authService=t}isVisible=!1;loginSuccess=new Q;closeModal=new Q;selectedRole=null;password="";nombreMoso="";errorMessage="";selectRole(t){this.selectedRole=t,this.password="",this.errorMessage=""}login(){if(!this.selectedRole||!this.password){this.errorMessage="Por favor selecciona un rol e ingresa la contrase\xF1a";return}let t=this.selectedRole==="moso"?this.nombreMoso:void 0;this.authService.login(this.selectedRole,this.password,t)?(this.loginSuccess.emit(this.authService.currentUserValue),this.close()):this.errorMessage="Contrase\xF1a incorrecta"}close(){this.isVisible=!1,this.selectedRole=null,this.password="",this.nombreMoso="",this.errorMessage="",this.closeModal.emit()}onOverlayClick(t){t.target===t.currentTarget&&this.close()}static \u0275fac=function(e){return new(e||s)(T(W))};static \u0275cmp=L({type:s,selectors:[["app-login-modal"]],inputs:{isVisible:"isVisible"},outputs:{loginSuccess:"loginSuccess",closeModal:"closeModal"},decls:1,vars:1,consts:[["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"user-selection"],[1,"role-buttons"],[1,"role-btn",3,"click"],[1,"icon"],["class","form-group",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"form-group"],["for","nombreMoso"],["type","text","id","nombreMoso","placeholder","Ingresa tu nombre",1,"form-control",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","placeholder","Ingresa la contrase\xF1a",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],[1,"error-message"]],template:function(e,n){e&1&&f(0,Ae,35,10,"div",0),e&2&&g("ngIf",n.isVisible)},dependencies:[j,H,N,R,B,$],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 4px 20px #0000004d}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;border-bottom:1px solid #eee}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#666;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.close-btn[_ngcontent-%COMP%]:hover{color:#000}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.user-selection[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:1rem;color:#333;text-align:center}.role-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;margin-bottom:1.5rem}.role-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:1rem;border:2px solid #ddd;border-radius:8px;background:#fff;cursor:pointer;transition:all .3s ease;min-width:80px}.role-btn[_ngcontent-%COMP%]:hover{border-color:#007bff;transform:translateY(-2px)}.role-btn.active[_ngcontent-%COMP%]{border-color:#007bff;background-color:#e3f2fd}.role-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:.5rem}.role-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#333}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:1rem;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px #007bff40}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.5rem;text-align:center}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem;padding:1rem;border-top:1px solid #eee}.btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:4px;cursor:pointer;font-size:.875rem;font-weight:500;transition:background-color .3s ease}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}"]})};var Ve=["fileInput"],ze=(s,t)=>({"btn-success":s,"btn-warning":t}),Le=(s,t,e,n)=>({"mesa-libre":s,"mesa-ocupada":t,"mesa-parcial":e,"mesa-dividida":n});function Fe(s,t){s&1&&(a(0,"a",36),r(1,"Cat\xE1logo"),o())}function He(s,t){s&1&&(a(0,"a",37),r(1,"Historial"),o())}function je(s,t){s&1&&(a(0,"a",38),r(1,"Productividad"),o())}function Re(s,t){s&1&&(a(0,"a",39),r(1,"Cat\xE1logo"),o())}function Be(s,t){s&1&&(a(0,"a",40),r(1,"Historial"),o())}function $e(s,t){s&1&&(a(0,"a",41),r(1,"Productividad"),o())}function Ne(s,t){s&1&&(a(0,"div",42),r(1,"Inicializando base de datos..."),o())}function We(s,t){if(s&1){let e=P();a(0,"div",51)(1,"h2",52),r(2,"\u{1F4B0} CONFIGURACI\xD3N INICIAL"),o(),a(3,"div",53)(4,"label",54),r(5,"Caja de Apertura (S/.):"),o(),a(6,"input",55),w("ngModelChange",function(i){p(e);let c=l(2);return y(c.cajaApertura,i)||(c.cajaApertura=i),u(i)}),o()(),a(7,"div",56)(8,"button",57),_("click",function(){p(e);let i=l(2);return u(i.establecerCajaApertura(i.cajaApertura))}),r(9,"Establecer Caja de Apertura"),o(),a(10,"button",58),_("click",function(){p(e);let i=l(2);return u(i.toggleCierreAutomatico())}),r(11),o()()()}if(s&2){let e=l(2);d(6),M("ngModel",e.cajaApertura),d(4),g("ngClass",ne(3,ze,e.cierreAutomaticoActivo,!e.cierreAutomaticoActivo)),d(),b(" ",e.cierreAutomaticoActivo?"\u{1F512} Cierre Auto: ON":"\u{1F513} Cierre Auto: OFF"," ")}}function Ue(s,t){if(s&1&&(a(0,"span",64),r(1),o()),s&2){let e=l(2).$implicit;d(),b("Pagado: S/ ",e.pagado==null?null:e.pagado.toFixed(2))}}function Ye(s,t){if(s&1&&(a(0,"span",62),r(1),E(2,"br"),f(3,Ue,2,1,"span",63),o()),s&2){let e=l().$implicit;d(),b(" S/ ",e.monto==null?null:e.monto.toFixed(2)),d(2),g("ngIf",e.pagado>0)}}function Qe(s,t){if(s&1){let e=P();a(0,"button",59),_("click",function(){let i=p(e).$implicit,c=l(2);return u(c.clickMesa(i))})("contextmenu",function(i){let c=p(e).$implicit,m=l(2);return u(m.mostrarOpcionesMesa(c,i))}),a(1,"div",60),r(2),o(),f(3,Ye,4,2,"span",61),o()}if(s&2){let e=t.$implicit,n=l(2);g("ngClass",ae(4,Le,e.estado===n.MESA_ESTADOS.LIBRE,e.estado===n.MESA_ESTADOS.OCUPADA,e.estado===n.MESA_ESTADOS.PARCIAL,!!e.dividida)),J("data-estado",e==null?null:e.estado),d(2),b("M",typeof e.numero=="string"?e.numero:e.numero.toString().padStart(2,"0")),d(),g("ngIf",e.estado!==n.MESA_ESTADOS.LIBRE)}}function qe(s,t){s&1&&(a(0,"span",80),r(1,"Pendiente"),o())}function Ge(s,t){s&1&&(a(0,"span",81),r(1,"Parcial"),o())}function Je(s,t){s&1&&(a(0,"span",82),r(1,"Pagado"),o())}function Ke(s,t){if(s&1){let e=P();a(0,"button",83),_("click",function(){p(e);let i=l().$implicit,c=l(3);return u(c.pagarPedidoEspecial(i))}),r(1,"Pagar"),o()}}function Xe(s,t){s&1&&(a(0,"button",84),r(1,"Completado"),o())}function Ze(s,t){if(s&1&&(a(0,"tr")(1,"td"),r(2),o(),a(3,"td"),r(4),o(),a(5,"td"),f(6,qe,2,0,"span",75)(7,Ge,2,0,"span",76)(8,Je,2,0,"span",77),o(),a(9,"td"),f(10,Ke,2,0,"button",78)(11,Xe,2,0,"button",79),o()()),s&2){let e=t.$implicit;d(2),I(e.cliente),d(2),b("S/ ",e.monto==null?null:e.monto.toFixed(2)),d(2),g("ngIf",e.estado==="pendiente"),d(),g("ngIf",e.estado==="parcial"),d(),g("ngIf",e.estado==="pagado"),d(2),g("ngIf",e.estado!=="pagado"),d(),g("ngIf",e.estado==="pagado")}}function et(s,t){s&1&&(a(0,"span",80),r(1,"Pendiente"),o())}function tt(s,t){s&1&&(a(0,"span",81),r(1,"Parcial"),o())}function it(s,t){s&1&&(a(0,"span",82),r(1,"Pagado"),o())}function ot(s,t){if(s&1){let e=P();a(0,"button",83),_("click",function(){p(e);let i=l().$implicit,c=l(3);return u(c.pagarPedidoEspecial(i))}),r(1,"Pagar"),o()}}function nt(s,t){s&1&&(a(0,"button",84),r(1,"Completado"),o())}function at(s,t){if(s&1&&(a(0,"tr")(1,"td"),r(2),o(),a(3,"td"),r(4),o(),a(5,"td"),f(6,et,2,0,"span",75)(7,tt,2,0,"span",76)(8,it,2,0,"span",77),o(),a(9,"td"),f(10,ot,2,0,"button",78)(11,nt,2,0,"button",79),o()()),s&2){let e=t.$implicit;d(2),I(e.cliente),d(2),b("S/ ",e.monto==null?null:e.monto.toFixed(2)),d(2),g("ngIf",e.estado==="pendiente"),d(),g("ngIf",e.estado==="parcial"),d(),g("ngIf",e.estado==="pagado"),d(2),g("ngIf",e.estado!=="pagado"),d(),g("ngIf",e.estado==="pagado")}}function rt(s,t){if(s&1){let e=P();a(0,"div",65)(1,"h2",66),r(2,"\u{1F6CD}\uFE0F PEDIDOS ESPECIALES"),o(),a(3,"div",67)(4,"div",68)(5,"button",69),_("click",function(){p(e);let i=l(2);return u(i.crearPedidoParaLlevar())}),r(6," \u{1F6CD}\uFE0F"),E(7,"br"),r(8,"Para Llevar "),o(),a(9,"table",70)(10,"thead")(11,"tr")(12,"th"),r(13,"Nombre"),o(),a(14,"th"),r(15,"Monto"),o(),a(16,"th"),r(17,"Estado"),o(),a(18,"th"),r(19,"Acci\xF3n"),o()()(),a(20,"tbody"),f(21,Ze,12,7,"tr",71),o()()(),a(22,"div",72)(23,"button",73),_("click",function(){p(e);let i=l(2);return u(i.crearPedidoDelivery())}),r(24," \u{1F3CD}\uFE0F"),E(25,"br"),r(26,"Delivery "),o(),a(27,"table",74)(28,"thead")(29,"tr")(30,"th"),r(31,"Nombre"),o(),a(32,"th"),r(33,"Monto"),o(),a(34,"th"),r(35,"Estado"),o(),a(36,"th"),r(37,"Acci\xF3n"),o()()(),a(38,"tbody"),f(39,at,12,7,"tr",71),o()()()()()}if(s&2){let e=l(2);d(21),g("ngForOf",e.pedidosParaLlevar),d(18),g("ngForOf",e.pedidosDelivery)}}function st(s,t){if(s&1&&(a(0,"div",85)(1,"div",86)(2,"div",87)(3,"h3"),r(4,"\u{1F4B5} Efectivo"),o(),a(5,"div",88),r(6),o()(),a(7,"div",89)(8,"h3"),r(9,"\u{1F4F1} Yape"),o(),a(10,"div",88),r(11),o()(),a(12,"div",90)(13,"h3"),r(14,"\u{1F4B3} Tarjeta"),o(),a(15,"div",88),r(16),o()(),a(17,"div",91)(18,"h3"),r(19,"\u{1FA99} Total del D\xEDa"),o(),a(20,"div",88),r(21),o()(),a(22,"div",92)(23,"h3"),r(24,"\u{1F4CA} Ganancia"),o(),a(25,"div",88),r(26),o()()()()),s&2){let e=l(2);d(6),b("S/ ",e.efectivoTotal==null?null:e.efectivoTotal.toFixed(2)),d(5),b("S/ ",e.yapeTotal==null?null:e.yapeTotal.toFixed(2)),d(5),b("S/ ",e.tarjetaTotal==null?null:e.tarjetaTotal.toFixed(2)),d(5),b("S/ ",e.totalDia==null?null:e.totalDia.toFixed(2)),d(5),b("S/ ",e.ganancia==null?null:e.ganancia.toFixed(2))}}function dt(s,t){if(s&1&&(a(0,"div",43),f(1,We,12,6,"div",44),a(2,"div",45)(3,"h2",46),r(4,"\u{1FA91} MESAS"),o(),a(5,"div",47),f(6,Qe,4,9,"button",48),o()(),f(7,rt,40,2,"div",49)(8,st,27,5,"div",50),o()),s&2){let e=l();d(),g("ngIf",e.authService.isCaja()),d(5),g("ngForOf",e.mesas),d(),g("ngIf",e.authService.isCaja()),d(),g("ngIf",e.authService.isCaja())}}function ct(s,t){if(s&1&&(a(0,"div",98)(1,"span",99),r(2),o(),r(3),o()),s&2){let e=t.$implicit;d(2),b("",e.metodo,":"),d(),b(" S/ ",e.monto==null?null:e.monto.toFixed(2)," ")}}function lt(s,t){if(s&1&&(a(0,"tr")(1,"td"),r(2),o(),a(3,"td"),r(4),o(),a(5,"td"),r(6),F(7,"date"),o(),a(8,"td"),r(9),o(),a(10,"td"),f(11,ct,4,2,"div",97),o()()),s&2){let e=t.$implicit;d(2),I(e.tipo),d(2),I(e.numero),d(2),I(q(7,5,e.fecha,"short")),d(3),b("S/ ",e.total==null?null:e.total.toFixed(2)),d(2),g("ngForOf",e.detallesPagos)}}function mt(s,t){if(s&1&&(a(0,"div",93)(1,"h2",94),r(2,"\u{1F9FE} RESUMEN DE PEDIDOS PAGADOS"),o(),a(3,"div",95)(4,"table",96)(5,"thead")(6,"tr")(7,"th"),r(8,"Tipo"),o(),a(9,"th"),r(10,"N\xFAmero"),o(),a(11,"th"),r(12,"Fecha"),o(),a(13,"th"),r(14,"Total"),o(),a(15,"th"),r(16,"M\xE9todo"),o()()(),a(17,"tbody"),f(18,lt,12,8,"tr",71),o()()()()),s&2){let e=l();d(18),g("ngForOf",e.historialPagados)}}function pt(s,t){s&1&&(a(0,"div",100)(1,"h2"),r(2,"\u{1F468}\u200D\u{1F373} Comandas de cocina"),o(),E(3,"div",101),o())}function ut(s,t){if(s&1){let e=P();a(0,"div")(1,"h3"),r(2),o(),a(3,"p",105),r(4,"\xBFC\xF3mo deseas registrar el pedido?"),o(),a(5,"div",106)(6,"button",107),_("click",function(){p(e);let i=l(2);return u(i.nuevoPedidoModal(i.modalMesa,"platos"))}),r(7,"POR PLATOS"),o(),a(8,"button",107),_("click",function(){p(e);let i=l(2);return u(i.nuevoPedidoModal(i.modalMesa,"monto"))}),r(9,"SOLO MONTO"),o(),a(10,"button",108),_("click",function(){p(e);let i=l(2);return u(i.dividirMesa(i.modalMesa))}),r(11,"Dividir mesa"),o(),a(12,"button",109),_("click",function(){p(e);let i=l(2);return u(i.closeMesaModal())}),r(13,"Cancelar"),o()()()}if(s&2){let e=l(2);d(2),b("Mesa ",e.modalMesa," (Libre)")}}function gt(s,t){if(s&1&&E(0,"div",118),s&2){let e=l(3);g("innerHTML",e.modalAbonosStr,G)}}function _t(s,t){s&1&&(a(0,"i"),r(1,"No hay abonos registrados"),o())}function ht(s,t){if(s&1){let e=P();a(0,"form",119,0),_("ngSubmit",function(){p(e);let i=ee(1),c=l(3);return u(c.onAbonoSubmit(i))}),a(2,"label"),r(3,"Monto a abonar:"),E(4,"br")(5,"input",120),o(),E(6,"br"),a(7,"label"),r(8,"Medio de Pago:"),o(),a(9,"div",121)(10,"button",122),_("click",function(){p(e);let i=l(3);return u(i.selectPaymentMethod("efectivo"))}),r(11,"Efectivo"),o(),a(12,"button",123),_("click",function(){p(e);let i=l(3);return u(i.selectPaymentMethod("yape"))}),r(13,"Yape"),o(),a(14,"button",124),_("click",function(){p(e);let i=l(3);return u(i.selectPaymentMethod("tarjeta"))}),r(15,"Tarjeta"),o()(),E(16,"input",125),a(17,"button",126),r(18,"Abonar"),o()()}if(s&2){let e=l(3);d(5),g("placeholder",oe("M\xE1ximo: S/ ",e.modalSaldoPendiente==null?null:e.modalSaldoPendiente.toFixed(2)))("min",.01)("max",e.modalSaldoPendiente),d(5),k("selected",e.selectedPaymentMethod==="efectivo"),d(2),k("selected",e.selectedPaymentMethod==="yape"),d(2),k("selected",e.selectedPaymentMethod==="tarjeta"),d(2),g("value",e.selectedPaymentMethod)}}function bt(s,t){if(s&1){let e=P();a(0,"button",117),_("click",function(){p(e);let i=l(3);return u(i.anularPedido(i.modalIdPedido,i.modalMesa))}),r(1,"Anular pedido"),o()}if(s&2){let e=l(3);g("disabled",!e.modalIdPedido)}}function vt(s,t){if(s&1){let e=P();a(0,"div")(1,"h3"),r(2),o(),a(3,"div",110)(4,"div",111)(5,"b"),r(6,"Monto Total:"),o(),r(7),o(),a(8,"div",111)(9,"b"),r(10,"Pagado:"),o(),r(11),o(),a(12,"div",111)(13,"b"),r(14,"Detalle de abonos:"),o(),E(15,"br"),f(16,gt,1,1,"div",112)(17,_t,2,0,"i",104),o(),a(18,"div",113),r(19),o()(),f(20,ht,19,11,"form",114),a(21,"div",115),f(22,bt,2,1,"button",116),a(23,"button",117),_("click",function(){p(e);let i=l(2);return u(i.mostrarPrecuenta(i.modalIdPedido))}),r(24,"Solicitar Precuenta"),o(),a(25,"button",117),_("click",function(){p(e);let i=l(2);return u(i.editarPedidoModal(i.modalIdPedido,i.modalMesa))}),r(26,"Agregar platos"),o(),a(27,"button",108),_("click",function(){p(e);let i=l(2);return u(i.closeMesaModal())}),r(28,"Cerrar"),o()()()}if(s&2){let e=l(2);d(2),te("Mesa ",e.modalMesa," (",e.modalBaseNum===0?"Ocupada":"Pago parcial",")"),d(5),b(" S/ ",e.modalMonto==null?null:e.modalMonto.toFixed(2)),d(4),b(" S/ ",e.modalPagado==null?null:e.modalPagado.toFixed(2)),d(5),g("ngIf",e.modalAbonosStr),d(),g("ngIf",!e.modalAbonosStr),d(2),b(" Saldo pendiente: S/ ",e.modalSaldoPendiente==null?null:e.modalSaldoPendiente.toFixed(2)," "),d(),g("ngIf",e.authService.isCaja()),d(2),g("ngIf",e.authService.isCaja()||e.authService.isMoso()),d(),g("disabled",!e.modalIdPedido),d(2),g("disabled",!e.modalIdPedido)}}function ft(s,t){if(s&1){let e=P();a(0,"div")(1,"h3"),r(2),o(),a(3,"p",105),r(4,"\xBFDeseas dividir esta mesa en 2?"),o(),a(5,"div",127)(6,"button",107),_("click",function(){p(e);let i=l(2);return u(i.dividirMesa(i.modalMesa))}),r(7,"Dividir en 2"),o(),a(8,"button",109),_("click",function(){p(e);let i=l(2);return u(i.closeMesaModal())}),r(9,"Cancelar"),o()()()}if(s&2){let e=l(2);d(2),b("Mesa ",e.modalMesa)}}function xt(s,t){if(s&1){let e=P();a(0,"div")(1,"h3"),r(2),o(),a(3,"p",105),r(4,"\xBFQu\xE9 deseas hacer?"),o(),a(5,"div",106)(6,"button",107),_("click",function(){p(e);let i=l(2);return u(i.nuevoPedidoModal(i.modalMesa,"platos"))}),r(7,"POR PLATOS"),o(),a(8,"button",107),_("click",function(){p(e);let i=l(2);return u(i.nuevoPedidoModal(i.modalMesa,"monto"))}),r(9,"SOLO MONTO"),o(),a(10,"button",108),_("click",function(){p(e);let i=l(2);return u(i.unirMesa(i.modalMesa))}),r(11,"Unir mesas"),o(),a(12,"button",109),_("click",function(){p(e);let i=l(2);return u(i.closeMesaModal())}),r(13,"Cancelar"),o()()()}if(s&2){let e=l(2);d(2),b("Mesa ",e.modalMesa," (Dividida)")}}function Ct(s,t){if(s&1){let e=P();a(0,"div")(1,"h3"),r(2),o(),a(3,"p",105),r(4,"\xBFEn qu\xE9 submesa deseas registrar el pedido por platos?"),o(),a(5,"div",127)(6,"button",107),_("click",function(){p(e);let i=l(2);return u(i.mostrarFormularioPorPlato(i.modalMesa+"A"))}),r(7),o(),a(8,"button",107),_("click",function(){p(e);let i=l(2);return u(i.mostrarFormularioPorPlato(i.modalMesa+"B"))}),r(9),o(),a(10,"button",109),_("click",function(){p(e);let i=l(2);return u(i.closeMesaModal())}),r(11,"Cancelar"),o()()()}if(s&2){let e=l(2);d(2),b("Mesa ",e.modalMesa," (Dividida)"),d(5),b("Mesa ",e.modalMesa,"A"),d(2),b("Mesa ",e.modalMesa,"B")}}function Pt(s,t){if(s&1){let e=P();a(0,"div")(1,"h3"),r(2),o(),a(3,"p",105),r(4,"\xBFEn qu\xE9 submesa deseas registrar el pedido por monto?"),o(),a(5,"div",127)(6,"button",107),_("click",function(){p(e);let i=l(2);return u(i.mostrarFormularioPorMonto(i.modalMesa+"A"))}),r(7),o(),a(8,"button",107),_("click",function(){p(e);let i=l(2);return u(i.mostrarFormularioPorMonto(i.modalMesa+"B"))}),r(9),o(),a(10,"button",109),_("click",function(){p(e);let i=l(2);return u(i.closeMesaModal())}),r(11,"Cancelar"),o()()()}if(s&2){let e=l(2);d(2),b("Mesa ",e.modalMesa," (Dividida)"),d(5),b("Mesa ",e.modalMesa,"A"),d(2),b("Mesa ",e.modalMesa,"B")}}function St(s,t){if(s&1){let e=P();a(0,"div",147),_("click",function(){let i=p(e).$implicit,c=l(4);return u(c.seleccionarProducto(i))}),a(1,"div",99),r(2),o(),a(3,"small",148)(4,"span"),r(5),F(6,"titlecase"),o(),a(7,"span",149),r(8),o()()()}if(s&2){let e=t.$implicit;d(2),I(e.nombre),d(3),I(re(6,3,e.categoria)),d(3),b("S/ ",e.precio==null?null:e.precio.toFixed(2))}}function Mt(s,t){if(s&1&&(a(0,"div",145),f(1,St,9,5,"div",146),o()),s&2){let e=l(3);d(),g("ngForOf",e.sugerenciasProductos)}}function yt(s,t){if(s&1){let e=P();a(0,"tr")(1,"td",157),r(2),o(),a(3,"td",158)(4,"div",159)(5,"button",160),_("click",function(){let i=p(e).index,c=l(4);return u(c.disminuirCantidad(i))}),r(6,"-"),o(),a(7,"span",161),r(8),o(),a(9,"button",162),_("click",function(){let i=p(e).index,c=l(4);return u(c.aumentarCantidad(i))}),r(10,"+"),o()()(),a(11,"td",163),r(12),o(),a(13,"td",163),r(14),o(),a(15,"td",158)(16,"button",164),_("click",function(){let i=p(e).index,c=l(4);return u(c.eliminarProductoPedido(i))}),r(17,"\xD7"),o()()()}if(s&2){let e=t.$implicit;d(2),I(e.nombre),d(3),g("disabled",e.cantidad<=1),d(3),I(e.cantidad),d(4),b("S/ ",e.precio),d(2),b("S/ ",e.precio*e.cantidad==null?null:(e.precio*e.cantidad).toFixed(2))}}function wt(s,t){if(s&1&&(a(0,"div",128)(1,"h4"),r(2,"Productos Agregados:"),o(),a(3,"div",150)(4,"table",151)(5,"thead")(6,"tr",152)(7,"th",153),r(8,"Producto"),o(),a(9,"th",154),r(10,"Cant."),o(),a(11,"th",155),r(12,"Precio"),o(),a(13,"th",155),r(14,"Subtotal"),o(),a(15,"th",154),r(16,"Acci\xF3n"),o()()(),a(17,"tbody"),f(18,yt,18,5,"tr",71),o()()(),a(19,"div",156),r(20),o()()),s&2){let e=l(3);d(18),g("ngForOf",e.pedidoDetalle),d(2),b(" Total: S/ ",e.totalPedido==null?null:e.totalPedido.toFixed(2)," ")}}function Et(s,t){if(s&1){let e=P();a(0,"div")(1,"h3"),r(2),o(),a(3,"h4"),r(4,"Agregar por Platos"),o(),a(5,"div",128)(6,"label",129),r(7,"Producto:"),o(),a(8,"div",130)(9,"input",131),w("ngModelChange",function(i){p(e);let c=l(2);return y(c.productoInput,i)||(c.productoInput=i),u(i)}),_("input",function(i){p(e);let c=l(2);return u(c.onProductoInputChange(i.target.value))}),o(),f(10,Mt,2,1,"div",132),o()(),a(11,"div",133)(12,"div",134)(13,"label",135),r(14,"Cantidad:"),o(),a(15,"input",136),w("ngModelChange",function(i){p(e);let c=l(2);return y(c.cantidadInput,i)||(c.cantidadInput=i),u(i)}),o()(),a(16,"div",137)(17,"button",138),_("click",function(){p(e);let i=l(2);return u(i.agregarPlato())}),r(18,"Agregar"),o()()(),f(19,wt,21,2,"div",139),a(20,"div",128)(21,"label",140),r(22,"Observaci\xF3n:"),o(),a(23,"textarea",141),w("ngModelChange",function(i){p(e);let c=l(2);return y(c.observacionInput,i)||(c.observacionInput=i),u(i)}),o()(),a(24,"div",142)(25,"button",143),_("click",function(){p(e);let i=l(2);return u(i.registrarPedidoPorPlatos(i.modalMesa))}),r(26,"Registrar Pedido"),o(),a(27,"button",144),_("click",function(){p(e);let i=l(2);return u(i.closeMesaModal())}),r(28,"Cancelar"),o()()()}if(s&2){let e=l(2);d(2),b("Nuevo Pedido - Mesa ",e.modalMesa),d(7),M("ngModel",e.productoInput),d(),g("ngIf",e.showSugerencias&&e.sugerenciasProductos.length>0),d(5),M("ngModel",e.cantidadInput),d(4),g("ngIf",e.pedidoDetalle.length>0),d(4),M("ngModel",e.observacionInput),d(2),g("disabled",e.pedidoDetalle.length===0)}}function Ot(s,t){if(s&1){let e=P();a(0,"div")(1,"h3"),r(2),o(),a(3,"h4"),r(4,"Agregar por Monto"),o(),a(5,"div",128)(6,"label",165),r(7,"Monto Total:"),o(),a(8,"input",166),w("ngModelChange",function(i){p(e);let c=l(2);return y(c.montoDirecto,i)||(c.montoDirecto=i),u(i)}),o()(),a(9,"div",128)(10,"label",167),r(11,"Observaci\xF3n:"),o(),a(12,"textarea",168),w("ngModelChange",function(i){p(e);let c=l(2);return y(c.observacionInput,i)||(c.observacionInput=i),u(i)}),o()(),a(13,"div",142)(14,"button",143),_("click",function(){p(e);let i=l(2);return u(i.registrarPedidoPorMonto(i.modalMesa))}),r(15,"Registrar Pedido"),o(),a(16,"button",144),_("click",function(){p(e);let i=l(2);return u(i.closeMesaModal())}),r(17,"Cancelar"),o()()()}if(s&2){let e=l(2);d(2),b("Nuevo Pedido - Mesa ",e.modalMesa),d(6),M("ngModel",e.montoDirecto),d(4),M("ngModel",e.observacionInput),d(2),g("disabled",!e.montoDirecto||e.montoDirecto<=0)}}function kt(s,t){if(s&1){let e=P();a(0,"div")(1,"h3"),r(2,"Nuevo Pedido Para Llevar"),o(),a(3,"div",128)(4,"label",169),r(5,"Nombre del cliente:"),o(),a(6,"input",170),w("ngModelChange",function(i){p(e);let c=l(2);return y(c.nombreClienteEspecial,i)||(c.nombreClienteEspecial=i),u(i)}),o()(),a(7,"div",128)(8,"label",171),r(9,"Monto total (S/.):"),o(),a(10,"input",172),w("ngModelChange",function(i){p(e);let c=l(2);return y(c.montoEspecial,i)||(c.montoEspecial=i),u(i)}),o()(),a(11,"div",128)(12,"label",173),r(13,"Observaci\xF3n:"),o(),a(14,"textarea",174),w("ngModelChange",function(i){p(e);let c=l(2);return y(c.observacionEspecial,i)||(c.observacionEspecial=i),u(i)}),o()(),a(15,"div",142)(16,"button",143),_("click",function(){p(e);let i=l(2);return u(i.registrarPedidoParaLlevar())}),r(17,"Registrar Pedido"),o(),a(18,"button",144),_("click",function(){p(e);let i=l(2);return u(i.closeMesaModal())}),r(19,"Cancelar"),o()()()}if(s&2){let e=l(2);d(6),M("ngModel",e.nombreClienteEspecial),d(4),M("ngModel",e.montoEspecial),d(4),M("ngModel",e.observacionEspecial),d(2),g("disabled",!e.nombreClienteEspecial||!e.montoEspecial||e.montoEspecial<=0)}}function It(s,t){if(s&1){let e=P();a(0,"div")(1,"h3"),r(2,"Nuevo Pedido Delivery"),o(),a(3,"div",128)(4,"label",175),r(5,"Nombre del cliente:"),o(),a(6,"input",176),w("ngModelChange",function(i){p(e);let c=l(2);return y(c.nombreClienteEspecial,i)||(c.nombreClienteEspecial=i),u(i)}),o()(),a(7,"div",128)(8,"label",177),r(9,"Direcci\xF3n:"),o(),a(10,"input",178),w("ngModelChange",function(i){p(e);let c=l(2);return y(c.direccionEspecial,i)||(c.direccionEspecial=i),u(i)}),o()(),a(11,"div",128)(12,"label",179),r(13,"Tel\xE9fono:"),o(),a(14,"input",180),w("ngModelChange",function(i){p(e);let c=l(2);return y(c.telefonoEspecial,i)||(c.telefonoEspecial=i),u(i)}),o()(),a(15,"div",128)(16,"label",181),r(17,"Monto total (S/.):"),o(),a(18,"input",182),w("ngModelChange",function(i){p(e);let c=l(2);return y(c.montoEspecial,i)||(c.montoEspecial=i),u(i)}),o()(),a(19,"div",128)(20,"label",183),r(21,"Observaci\xF3n:"),o(),a(22,"textarea",184),w("ngModelChange",function(i){p(e);let c=l(2);return y(c.observacionEspecial,i)||(c.observacionEspecial=i),u(i)}),o()(),a(23,"div",142)(24,"button",143),_("click",function(){p(e);let i=l(2);return u(i.registrarPedidoDelivery())}),r(25,"Registrar Pedido"),o(),a(26,"button",144),_("click",function(){p(e);let i=l(2);return u(i.closeMesaModal())}),r(27,"Cancelar"),o()()()}if(s&2){let e=l(2);d(6),M("ngModel",e.nombreClienteEspecial),d(4),M("ngModel",e.direccionEspecial),d(4),M("ngModel",e.telefonoEspecial),d(4),M("ngModel",e.montoEspecial),d(4),M("ngModel",e.observacionEspecial),d(2),g("disabled",!e.nombreClienteEspecial)}}function Dt(s,t){if(s&1&&(a(0,"div",190),r(1),F(2,"date"),o()),s&2){let e=t.$implicit;d(),ie(" ",e.tipo_pago.charAt(0).toUpperCase()+e.tipo_pago.slice(1),": S/ ",e.monto==null?null:e.monto.toFixed(2)," - ",q(2,3,e.fecha,"short")," ")}}function Tt(s,t){if(s&1&&(a(0,"div",188)(1,"strong"),r(2,"Detalle de Abonos:"),o(),E(3,"br"),f(4,Dt,3,6,"div",189),o()),s&2){let e=l(3);d(4),g("ngForOf",e.pedidoEspecialSeleccionado.abonos)}}function At(s,t){if(s&1){let e=P();a(0,"div")(1,"h3"),r(2),o(),a(3,"div",128)(4,"strong"),r(5,"Cliente:"),o(),r(6),E(7,"br"),a(8,"strong"),r(9,"Monto total:"),o(),r(10),E(11,"br"),a(12,"strong"),r(13,"Pagado:"),o(),r(14),E(15,"br"),a(16,"strong"),r(17,"Saldo pendiente:"),o(),r(18),o(),f(19,Tt,5,1,"div",185),a(20,"div",128)(21,"label",186),r(22,"Monto a pagar (S/.):"),o(),a(23,"input",187),w("ngModelChange",function(i){p(e);let c=l(2);return y(c.montoAbonoPedidoEspecial,i)||(c.montoAbonoPedidoEspecial=i),u(i)}),o()(),a(24,"div",128)(25,"label"),r(26,"M\xE9todo de pago:"),o(),a(27,"div",121)(28,"button",122),_("click",function(){p(e);let i=l(2);return u(i.selectPaymentMethod("efectivo"))}),r(29,"Efectivo"),o(),a(30,"button",123),_("click",function(){p(e);let i=l(2);return u(i.selectPaymentMethod("yape"))}),r(31,"Yape"),o(),a(32,"button",124),_("click",function(){p(e);let i=l(2);return u(i.selectPaymentMethod("tarjeta"))}),r(33,"Tarjeta"),o()()(),a(34,"div",142)(35,"button",143),_("click",function(){p(e);let i=l(2);return u(i.procesarPagoPedidoEspecial())}),r(36,"Registrar Pago"),o(),a(37,"button",144),_("click",function(){p(e);let i=l(2);return u(i.closeMesaModal())}),r(38,"Cancelar"),o()()()}if(s&2){let e=l(2);d(2),b("Pagar ",(e.pedidoEspecialSeleccionado==null?null:e.pedidoEspecialSeleccionado.tipo)==="llevar"?"Para Llevar":"Delivery"),d(4),b(" ",e.pedidoEspecialSeleccionado==null?null:e.pedidoEspecialSeleccionado.cliente),d(4),b(" S/ ",e.pedidoEspecialSeleccionado==null||e.pedidoEspecialSeleccionado.monto==null?null:e.pedidoEspecialSeleccionado.monto.toFixed(2)),d(4),b(" S/ ",((e.pedidoEspecialSeleccionado==null?null:e.pedidoEspecialSeleccionado.pagado)||0)==null?null:((e.pedidoEspecialSeleccionado==null?null:e.pedidoEspecialSeleccionado.pagado)||0).toFixed(2)),d(4),b(" S/ ",(e.pedidoEspecialSeleccionado==null?null:e.pedidoEspecialSeleccionado.monto)-((e.pedidoEspecialSeleccionado==null?null:e.pedidoEspecialSeleccionado.pagado)||0)==null?null:((e.pedidoEspecialSeleccionado==null?null:e.pedidoEspecialSeleccionado.monto)-((e.pedidoEspecialSeleccionado==null?null:e.pedidoEspecialSeleccionado.pagado)||0)).toFixed(2)," "),d(),g("ngIf",(e.pedidoEspecialSeleccionado==null?null:e.pedidoEspecialSeleccionado.abonos)&&e.pedidoEspecialSeleccionado.abonos.length>0),d(4),M("ngModel",e.montoAbonoPedidoEspecial),g("min",.01)("max",(e.pedidoEspecialSeleccionado==null?null:e.pedidoEspecialSeleccionado.monto)-((e.pedidoEspecialSeleccionado==null?null:e.pedidoEspecialSeleccionado.pagado)||0)),d(5),k("selected",e.selectedPaymentMethod==="efectivo"),d(2),k("selected",e.selectedPaymentMethod==="yape"),d(2),k("selected",e.selectedPaymentMethod==="tarjeta"),d(3),g("disabled",!e.selectedPaymentMethod||e.montoAbonoPedidoEspecial<=0)}}function Vt(s,t){if(s&1&&(a(0,"div",102)(1,"div",103),f(2,ut,14,1,"div",104)(3,vt,29,11,"div",104)(4,ft,10,1,"div",104)(5,xt,14,1,"div",104)(6,Ct,12,3,"div",104)(7,Pt,12,3,"div",104)(8,Et,29,7,"div",104)(9,Ot,18,4,"div",104)(10,kt,20,4,"div",104)(11,It,28,6,"div",104)(12,At,39,16,"div",104),o()()),s&2){let e=l();d(2),g("ngIf",e.modalType==="libre"),d(),g("ngIf",e.modalType==="ocupada"),d(),g("ngIf",e.modalType==="dividir"),d(),g("ngIf",e.modalType==="unir"),d(),g("ngIf",e.modalType==="selector-submesa-platos"),d(),g("ngIf",e.modalType==="selector-submesa-monto"),d(),g("ngIf",e.modalType==="pedido-platos"),d(),g("ngIf",e.modalType==="pedido-monto"),d(),g("ngIf",e.modalType==="para-llevar"),d(),g("ngIf",e.modalType==="delivery"),d(),g("ngIf",e.modalType==="pago-especial")}}var Me=class s{constructor(t,e,n,i,c,m){this.dexieService=t;this.socketService=e;this.authService=n;this.notificationService=i;this.catalogoService=c;this.cdr=m}fileInput;fechaActual="";cajaApertura=0;efectivoTotal=0;yapeTotal=0;tarjetaTotal=0;totalDia=0;ganancia=0;fechaAnterior="";cierreAutomaticoActivo=!0;ultimaVerificacionCierre=new Date;fechaInicioReporte="";fechaFinReporte="";mostrarResumenReporte=!1;efectivoReporte=0;yapeReporte=0;tarjetaReporte=0;totalReporte=0;gananciaReporte=0;detallesReporte=[];pedidosParaLlevar=[];pedidosDelivery=[];historialPagados=[];mesas=[];mesasDivididas={};TOTAL_MESAS=27;MESA_ESTADOS={LIBRE:"libre",OCUPADA:"ocupada",PARCIAL:"parcial"};showMesaModal=!1;mesaModalContent="";mesaSeleccionada=null;modalType="";modalMesa=null;modalIdPedido=null;modalMonto=0;modalPagado=0;modalSaldoPendiente=0;modalAbonosStr="";modalBaseNum=0;selectedPaymentMethod="";pedidoActual=null;showPedidoModal=!1;pedidoDetalle=[];productoSeleccionado=null;productoInput="";cantidadInput=1;observacionInput="";montoDirecto=0;totalPedido=0;sugerenciasProductos=[];showSugerencias=!1;catalogoProductos=[];catalogoCargado=!1;editandoPedido=!1;idPedidoEditando=null;showLoginModal=!0;usuario="cajero";nombreMozo="";clave="";usuarioActual=null;selectedSuggestionIndex=-1;categoriaSeleccionada="todos";categorias=[];productosFiltrados=[];ngOnInit(){this.actualizarFecha(),this.inicializarCierreAutomatico(),setInterval(()=>this.actualizarFecha(),6e4),setInterval(()=>this.verificarCierreAutomatico(),3e5),this.inicializarFechasReporte(),this.usuarioActual=this.authService.currentUserValue,this.usuarioActual?(this.showLoginModal=!1,this.inicializarAplicacion()):this.showLoginModal=!0,this.authService.currentUser.subscribe(t=>{this.usuarioActual=t,t&&(this.showLoginModal=!1,this.inicializarAplicacion())}),this.inicializarMenuLateral(),this.inicializarModoOscuro(),this.configurarEventosTeclado()}actualizarFecha(){let t=new Date,e={weekday:"long",year:"numeric",month:"long",day:"numeric"};this.fechaActual=t.toLocaleDateString("es-ES",e);let n=t.toISOString().split("T")[0];this.fechaAnterior&&this.fechaAnterior!==n&&this.ejecutarCierreAutomatico(this.fechaAnterior),this.fechaAnterior=n}inicializarFechasReporte(){let e=new Date().toISOString().split("T")[0];this.fechaInicioReporte=e,this.fechaFinReporte=e}inicializarCierreAutomatico(){let t=new Date;this.fechaAnterior=t.toISOString().split("T")[0],this.ultimaVerificacionCierre=t,this.verificarCierresPendientes()}verificarCierresPendientes(){return C(this,null,function*(){try{let t=new Date,e=new Date(t);e.setDate(e.getDate()-1);let n=e.toISOString().split("T")[0];(yield this.dexieService.verificarCajaCerrada(n))||(yield this.dexieService.getCajaPorFecha(n))&&(console.log("Detectada caja pendiente de cierre:",n),yield this.ejecutarCierreAutomatico(n))}catch(t){console.error("Error al verificar cierres pendientes:",t)}})}verificarCierreAutomatico(){return C(this,null,function*(){if(this.cierreAutomaticoActivo)try{let t=new Date;if(t.getHours()>=23){let n=t.toISOString().split("T")[0];(yield this.dexieService.verificarCajaCerrada(n))||(console.log("Iniciando cierre autom\xE1tico de caja para:",n),yield this.ejecutarCierreAutomatico(n))}this.ultimaVerificacionCierre=t}catch(t){console.error("Error en verificaci\xF3n de cierre autom\xE1tico:",t)}})}ejecutarCierreAutomatico(t){return C(this,null,function*(){try{console.log("Ejecutando cierre autom\xE1tico para la fecha:",t);let e=yield this.dexieService.cerrarCajaAutomatico(t);if(e){let n=`\u{1F512} CIERRE AUTOM\xC1TICO DE CAJA
Fecha: ${t}
Total Ventas: S/. ${e.total.toFixed(2)}
Efectivo: S/. ${e.efectivo.toFixed(2)}
Yape: S/. ${e.yape.toFixed(2)}
Tarjeta: S/. ${e.tarjeta.toFixed(2)}
Ganancia: S/. ${e.ganancia.toFixed(2)}`;this.notificationService.success("Caja cerrada autom\xE1ticamente"),console.log(n);let i=new Date().toISOString().split("T")[0];t===i&&(yield this.calcularTotales())}else console.log("No se pudo cerrar la caja autom\xE1ticamente para:",t)}catch(e){console.error("Error al ejecutar cierre autom\xE1tico:",e),this.notificationService.error("Error en el cierre autom\xE1tico de caja")}})}toggleCierreAutomatico(){this.cierreAutomaticoActivo=!this.cierreAutomaticoActivo;let t=this.cierreAutomaticoActivo?"activado":"desactivado";this.notificationService.success(`Cierre autom\xE1tico ${t}`),console.log(`Cierre autom\xE1tico de caja ${t}`)}inicializarMenuLateral(){this.inicializarMenuMobile()}inicializarMenuMobile(){let t=document.getElementById("mobileMenuBtn"),e=document.getElementById("mobileMenu");t&&e&&(t.addEventListener("click",()=>{e.classList.toggle("show")}),document.addEventListener("click",i=>{!e.contains(i.target)&&i.target!==t&&e.classList.remove("show")}),e.querySelectorAll(".mobile-menu-item").forEach(i=>{i.addEventListener("click",()=>{e.classList.remove("show")})}))}inicializarModoOscuro(){let t=document.getElementById("toggleDarkMode"),e=document.querySelector("app-home");t&&e&&(localStorage.getItem("darkMode")==="true"&&(e.classList.add("dark-mode"),t.textContent="\u2600\uFE0F"),t.addEventListener("click",()=>{e.classList.toggle("dark-mode");let i=e.classList.contains("dark-mode");localStorage.setItem("darkMode",i.toString()),t.textContent=i?"\u2600\uFE0F":"\u{1F319}"}))}logout(){this.authService.logout(),this.showLoginModal=!0,this.usuarioActual=null}inicializarAplicacion(){return C(this,null,function*(){yield this.cargarCatalogoProductos(),this.cargarDatos(),this.configurarEventosTeclado(),this.socketService.connect(this.authService.currentUserValue),this.configurarEventosSocket(),this.configurarEventosSocketMesas(),this.configurarReconexionSocket()})}cargarCatalogoProductos(){return C(this,null,function*(){if(!this.catalogoCargado)try{this.catalogoProductos=yield this.catalogoService.getProductos(),this.catalogoProductos.length===0&&(yield this.catalogoService.inicializarProductosEjemplo(),this.catalogoProductos=yield this.catalogoService.getProductos()),this.categorias=this.catalogoService.getCategorias(),this.catalogoCargado=!0}catch(t){console.error("Error al cargar cat\xE1logo:",t)}})}cargarDatos(){this.dexieService.getCajaActual().then(t=>{t&&(this.cajaApertura=t.monto)}),this.cargarPedidosParaLlevar(),this.cargarPedidosDelivery(),this.cargarHistorialPagados(),this.calcularTotales(),this.renderMesas()}cargarPedidosParaLlevar(){this.dexieService.getPedidosEspecialesPorTipo("llevar").then(t=>{this.pedidosParaLlevar=t})}cargarPedidosDelivery(){this.dexieService.getPedidosEspecialesPorTipo("delivery").then(t=>{this.pedidosDelivery=t})}cargarHistorialPagados(){let t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()).toISOString(),n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59,999).toISOString();this.dexieService.getHistorialPagos().then(i=>{let c=i.filter(h=>{let v=new Date(h.fecha),x=new Date;return v.toDateString()===x.toDateString()}),m=new Map;c.forEach(h=>{let v=`${h.pedidoId}-${h.tipo}-${h.numero}`;if(m.has(v)){let x=m.get(v);x.detallesPagos.push({monto:h.total,metodo:h.metodoPago,fecha:h.fecha}),x.total+=h.total,new Date(h.fecha)>new Date(x.fecha)&&(x.fecha=h.fecha)}else m.set(v,{pedidoId:h.pedidoId,tipo:h.tipo,numero:h.numero,total:h.total,fecha:h.fecha,items:h.items||[],detallesPagos:[{monto:h.total,metodo:h.metodoPago,fecha:h.fecha}]})}),this.historialPagados=Array.from(m.values()).sort((h,v)=>new Date(v.fecha).getTime()-new Date(h.fecha).getTime())})}calcularTotales(){this.dexieService.getHistorialPagos().then(t=>{let e=new Date,n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59,999),c=t.filter(x=>{let S=new Date(x.fecha);return S>=n&&S<=i}),m=0,h=0,v=0;c.forEach(x=>{let S=x.total||x.monto||0;x.metodoPago==="efectivo"?m+=S:x.metodoPago==="yape"?h+=S:x.metodoPago==="tarjeta"&&(v+=S)}),this.efectivoTotal=m,this.yapeTotal=h,this.tarjetaTotal=v,this.totalDia=this.efectivoTotal+this.yapeTotal+this.tarjetaTotal,this.ganancia=this.totalDia-this.cajaApertura})}renderMesas(){return C(this,null,function*(){let t=new Date().toISOString().split("T")[0],n=yield this.dexieService.getPedidosPorFecha(t);console.log("Total pedidos:",n.length);let i={};n.forEach(m=>{i[m.mesa]||(i[m.mesa]=[]),i[m.mesa].push(m)}),this.mesas=[];let c=localStorage.getItem("mesasDivididas");if(c)try{this.mesasDivididas=JSON.parse(c)}catch(m){console.error("Error al leer mesas divididas:",m)}for(let m=1;m<=this.TOTAL_MESAS;m++)if(this.mesasDivididas[m])for(let h of this.mesasDivididas[m]){let v=this.MESA_ESTADOS.LIBRE,x=0,S=0,A=null,O=i[h]||[];if(O.length>0){let D=O.find(Y=>Y.monto>Y.pagado&&Y.estado!=="anulado");D&&(v=D.pagado===0?this.MESA_ESTADOS.OCUPADA:this.MESA_ESTADOS.PARCIAL,x=D.monto,S=D.pagado,A=D.id)}this.mesas.push({numero:h,estado:v,monto:x,pagado:S,idPedido:A,dividida:!0})}else{let h=i[m]||[],v=this.MESA_ESTADOS.LIBRE,x=0,S=0,A=null;if(h.length>0){let O=h.find(D=>D.monto>D.pagado&&D.estado!=="anulado");O&&(v=O.pagado===0?this.MESA_ESTADOS.OCUPADA:this.MESA_ESTADOS.PARCIAL,x=O.monto,S=O.pagado,A=O.id,console.log(`Mesa ${m}: estado=${v}, monto=${x}, pagado=${S}`))}this.mesas.push({numero:m,estado:v,monto:x,pagado:S,idPedido:A,dividida:!1})}console.log("Estado final de mesas:",this.mesas),console.log("Mesas con estado ocupada:",this.mesas.filter(m=>m.estado==="ocupada")),console.log("Mesas con estado parcial:",this.mesas.filter(m=>m.estado==="parcial")),this.cdr.detectChanges()})}clickMesa(t){return C(this,null,function*(){if(console.log("Click en mesa:",t),t.estado===this.MESA_ESTADOS.LIBRE){if(t.dividida){let e=typeof t.numero=="string"?parseInt(t.numero.match(/^\d+/)?.[0]||t.numero):t.numero;this.modalType="unir",this.modalMesa=e,this.modalBaseNum=e}else this.modalType="libre",this.modalMesa=t.numero,this.modalBaseNum=typeof t.numero=="string"?parseInt(t.numero.match(/^\d+/)?.[0]||t.numero):t.numero;this.showMesaModal=!0}else{if(console.log("Mesa ocupada clickeada:",{numero:t.numero,idPedido:t.idPedido,monto:t.monto}),this.modalType="ocupada",this.modalMesa=t.numero,this.modalIdPedido=t.idPedido,this.modalMonto=t.monto,this.modalPagado=t.pagado,this.modalSaldoPendiente=t.monto-t.pagado,console.log("modalIdPedido establecido a:",this.modalIdPedido),this.modalBaseNum=t.monto-t.pagado>0?1:0,t.idPedido)try{let e=yield this.dexieService.getPedidoPorId(t.idPedido);if(e&&e.abonos&&Array.isArray(e.abonos)&&e.abonos.length>0){let n=e.abonos.reduce((i,c)=>i+Number(c.monto),0);this.modalPagado=n,this.modalSaldoPendiente=t.monto-n,this.modalAbonosStr=e.abonos.map(i=>`<div style="font-size:0.97em; color:#444; margin-bottom:2px;">
                ${i.tipo_pago.charAt(0).toUpperCase()+i.tipo_pago.slice(1)}: S/ ${Number(i.monto).toFixed(2)}
              </div>`).join("")}else this.modalAbonosStr=""}catch(e){console.error("Error al cargar detalles del pedido:",e)}this.showMesaModal=!0}})}mostrarOpcionesMesa(t,e){e.preventDefault();let n=typeof t.numero=="string"?parseInt(t.numero.match(/^\d+/)?.[0]||t.numero):t.numero;this.modalType=t.dividida?"unir":"dividir",this.modalMesa=n,this.modalBaseNum=n,this.showMesaModal=!0}dividirMesa(t){this.mesasDivididas[t]=[`${t}A`,`${t}B`],localStorage.setItem("mesasDivididas",JSON.stringify(this.mesasDivididas)),this.closeMesaModal(),this.renderMesas()}unirMesa(t){let e=this.mesas.find(m=>m.numero===`${t}A`),n=this.mesas.find(m=>m.numero===`${t}B`),i=e&&(e.estado===this.MESA_ESTADOS.OCUPADA||e.estado===this.MESA_ESTADOS.PARCIAL),c=n&&(n.estado===this.MESA_ESTADOS.OCUPADA||n.estado===this.MESA_ESTADOS.PARCIAL);if(i||c){let m="No se puede unir la mesa porque ";i&&c?m+="ambas sub-mesas tienen pedidos activos.":i?m+="la mesa "+t+"A tiene un pedido activo.":m+="la mesa "+t+"B tiene un pedido activo.",m+=" Debe completar o anular los pedidos antes de unir las mesas.",this.notificationService.error(m);return}delete this.mesasDivididas[t],localStorage.setItem("mesasDivididas",JSON.stringify(this.mesasDivididas)),this.closeMesaModal(),this.renderMesas(),this.notificationService.success(`Mesa ${t} unida correctamente`)}onLoginSuccess(t){this.usuarioActual=t,this.showLoginModal=!1,this.inicializarAplicacion()}onCloseLoginModal(){this.showLoginModal=!1}closeMesaModal(){this.showMesaModal=!1,this.mesaModalContent="",this.modalType="",this.selectedPaymentMethod="",this.pedidoDetalle=[],this.totalPedido=0,this.productoSeleccionado=null,this.productoInput="",this.cantidadInput=1,this.observacionInput="",this.montoDirecto=0,this.showSugerencias=!1,this.sugerenciasProductos=[],this.editandoPedido=!1,this.idPedidoEditando=null,this.nombreClienteEspecial="",this.direccionEspecial="",this.telefonoEspecial="",this.montoEspecial=0,this.observacionEspecial=""}selectPaymentMethod(t){this.selectedPaymentMethod=t}onAbonoSubmit(t){return C(this,null,function*(){let e=new FormData(t),n=parseFloat(e.get("abono")),i=this.selectedPaymentMethod;n&&i&&this.modalIdPedido&&(yield this.abonarPedido(this.modalIdPedido,n,i,this.modalMonto,this.modalPagado,this.modalMesa))})}crearNuevoPedido(t){console.log("Crear nuevo pedido para mesa:",t)}verPedido(t){console.log("Ver pedido:",t)}mostrarFormularioPorPlato(t){return C(this,null,function*(){console.log("Mostrar formulario por plato para mesa:",t),this.editandoPedido&&this.modalMesa===t||(this.pedidoDetalle=[],this.totalPedido=0,this.modalMesa!==t&&(this.editandoPedido=!1,this.idPedidoEditando=null)),this.productoSeleccionado=null,this.productoInput="",this.cantidadInput=1,this.observacionInput="",this.showSugerencias=!1,this.sugerenciasProductos=[],this.categoriaSeleccionada="todos",yield this.filtrarProductosPorCategoria(),this.modalType="pedido-platos",this.modalMesa=t,this.showMesaModal=!0})}mostrarFormularioPorMonto(t){console.log("Mostrar formulario por monto para mesa:",t),this.montoDirecto=0,this.observacionInput="",this.modalType="pedido-monto",this.modalMesa=t,this.showMesaModal=!0}abonarPedido(t,e,n,i,c,m){return C(this,null,function*(){let h=i-c;if(e>h){this.notificationService.error("El monto no puede ser mayor al saldo pendiente");return}try{yield this.dexieService.abonarPedido(t,e,n),this.notificationService.success("Abono registrado correctamente");let v=yield this.dexieService.getPedidoPorId(t);v&&(this.modalPagado=v.pagado||0,this.modalSaldoPendiente=this.modalMonto-this.modalPagado,v.abonos&&Array.isArray(v.abonos)&&v.abonos.length>0&&(this.modalAbonosStr=v.abonos.map(x=>`<div style="font-size:0.97em; color:#444; margin-bottom:2px;">
              ${x.tipo_pago.charAt(0).toUpperCase()+x.tipo_pago.slice(1)}: S/ ${Number(x.monto).toFixed(2)} - ${new Date(x.fecha).toLocaleString()}
            </div>`).join("")),this.modalSaldoPendiente<=0&&(yield this.limpiarMesa(m),this.closeMesaModal(),this.notificationService.success("Pago completado. Mesa limpiada y lista para nuevos clientes."))),yield this.renderMesas(),yield this.calcularTotales(),yield this.cargarHistorialPagados()}catch(v){console.error("Error al abonar pedido:",v),this.notificationService.error("Error al registrar el abono")}})}pagarPedidoEspecial(t){this.modalType="pago-especial",this.pedidoEspecialSeleccionado=t,this.montoAbonoPedidoEspecial=t.monto-(t.pagado||0),this.selectedPaymentMethod="",this.showMesaModal=!0}anularPedido(t,e){return C(this,null,function*(){if(!t){this.notificationService.error("No se encontr\xF3 un pedido v\xE1lido para anular");return}if(confirm("\xBFEst\xE1 seguro de anular este pedido?"))try{yield this.dexieService.anularPedido(t),yield this.limpiarMesa(e),this.notificationService.success("Pedido anulado correctamente. Mesa limpiada y lista para nuevos clientes."),this.closeMesaModal(),yield this.renderMesas(),yield this.calcularTotales()}catch(n){console.error("Error al anular pedido:",n),this.notificationService.error("Error al anular el pedido")}})}limpiarMesa(t){return C(this,null,function*(){try{this.pedidoDetalle=[],this.totalPedido=0,this.productoSeleccionado=null,this.productoInput="",this.cantidadInput=1,this.observacionInput="",this.montoDirecto=0,this.showSugerencias=!1,this.sugerenciasProductos=[],this.modalMonto=0,this.modalPagado=0,this.modalSaldoPendiente=0,this.modalAbonosStr="",this.modalIdPedido=null,this.editandoPedido=!1,this.idPedidoEditando=null;let e=document.getElementById("platosSeleccionados");e&&(e.innerHTML="");let n=document.getElementById("totalPedido");n&&(n.textContent="0.00"),console.log(`Mesa ${t} limpiada correctamente`)}catch(e){console.error("Error al limpiar mesa:",e)}})}mostrarPrecuenta(t){return C(this,null,function*(){if(!t){this.notificationService.error("No se encontr\xF3 un pedido v\xE1lido para mostrar la precuenta");return}try{let e=yield this.dexieService.getPedidoPorId(t);if(e){let n=`
          <h3>Precuenta - Mesa ${e.mesa}</h3>
          <div style="margin: 15px 0;">
            <strong>Detalles del pedido:</strong><br>
            ${e.detalles||"Sin detalles espec\xEDficos"}
          </div>
          <div style="margin: 15px 0;">
            <strong>Monto total:</strong> S/ ${e.monto.toFixed(2)}<br>
            <strong>Pagado:</strong> S/ ${e.pagado.toFixed(2)}<br>
            <strong>Saldo pendiente:</strong> S/ ${(e.monto-e.pagado).toFixed(2)}
          </div>
          <div style="margin: 15px 0;">
            <strong>Fecha:</strong> ${new Date(e.fecha).toLocaleDateString()}<br>
            <strong>Mozo:</strong> ${e.mozo||"No asignado"}
          </div>
        `;if(confirm("\xBFDesea imprimir la precuenta?")){let i=window.open("","_blank");i&&(i.document.write(`
              <html>
                <head><title>Precuenta - Mesa ${e.mesa}</title></head>
                <body style="font-family: Arial, sans-serif; padding: 20px;">
                  ${n}
                </body>
              </html>
            `),i.document.close(),i.print())}else this.notificationService.info(n.replace(/<[^>]*>/g,`
`))}else this.notificationService.error("Pedido no encontrado")}catch(e){console.error("Error al mostrar precuenta:",e),this.notificationService.error("Error al generar la precuenta")}})}editarPedidoModal(t,e){return C(this,null,function*(){if(console.log("editarPedidoModal llamado con:",{idPedido:t,num:e}),console.log("modalIdPedido actual:",this.modalIdPedido),!t){console.log("Error: idPedido es null o undefined"),this.notificationService.error("No se encontr\xF3 un pedido v\xE1lido para editar");return}try{let n=yield this.dexieService.getPedidoPorId(t);n?(this.editandoPedido=!0,this.idPedidoEditando=t,this.mostrarFormularioPorPlato(e),setTimeout(()=>{try{if(n.productos&&Array.isArray(n.productos))this.pedidoDetalle=n.productos.map(i=>({nombre:i.nombre,cantidad:i.cantidad,precio:i.precio,observacion:""}));else if(n.detalles&&n.detalles.includes("Plato:")){let i=n.detalles.split(`
`);this.pedidoDetalle=[];for(let c of i){let m=c.match(/\d+\. (.+) \((\d+)x\) - S\/ ([\d.]+) = S\/ [\d.]+/);m&&this.pedidoDetalle.push({nombre:m[1],cantidad:parseInt(m[2]),precio:parseFloat(m[3]),observacion:""})}}else this.pedidoDetalle=[];this.calcularTotalPlatos()}catch(i){console.error("Error al parsear detalles del pedido:",i)}},100),this.notificationService.info("Agregando platos al pedido existente")):this.notificationService.error("Pedido no encontrado")}catch(n){console.error("Error al editar pedido:",n),this.notificationService.error("Error al cargar el pedido para edici\xF3n")}})}nuevoPedidoModal(t,e){if(this.mesasDivididas[t]){this.modalType=e==="platos"?"selector-submesa-platos":"selector-submesa-monto",this.modalMesa=t,this.showMesaModal=!0;return}this.closeMesaModal();let n=t.toString();e==="platos"?this.mostrarFormularioPorPlato(n):e==="monto"&&this.mostrarFormularioPorMonto(n)}agregarPlato(){return C(this,null,function*(){let t=this.productoInput.trim(),e=this.cantidadInput||1;if(!t){this.notificationService.error("Debe ingresar el nombre del producto");return}if(e<=0){this.notificationService.error("La cantidad debe ser mayor a 0");return}try{let n=yield this.catalogoService.getProductos(),i=n.find(m=>m.nombre.toLowerCase()===t.toLowerCase()&&m.disponible);if(i||(i=n.find(m=>m.nombre.toLowerCase().includes(t.toLowerCase())&&m.disponible)),!i&&this.productoSeleccionado&&(i=this.productoSeleccionado),!i){this.notificationService.error("Producto no encontrado en el cat\xE1logo o no disponible");return}if(!i.disponible){this.notificationService.error("El producto no est\xE1 disponible");return}let c=this.pedidoDetalle.find(m=>m.id===i.id);c?(c.cantidad+=e,this.notificationService.info(`Cantidad actualizada: ${c.nombre} (${c.cantidad})`)):(this.pedidoDetalle.push(z(V({},i),{cantidad:e})),this.notificationService.success(`Producto agregado: ${i.nombre} (${e})`)),this.productoInput="",this.cantidadInput=1,this.productoSeleccionado=null,this.ocultarSugerenciasProductos(),this.calcularTotalPlatos(),setTimeout(()=>{let m=document.getElementById("productoInput");m&&m.focus()},100)}catch(n){console.error("Error al agregar producto:",n),this.notificationService.error("Error al agregar el producto")}})}agregarPlatoModerno(){let t=document.getElementById("buscarProducto"),e=document.getElementById("cantidadProducto"),n=document.getElementById("platosSeleccionados");if(!t||!e||!n)return;let i=t.value.trim(),c=parseInt(e.value)||1;if(!i){this.notificationService.error("Por favor ingrese el nombre del producto");return}this.catalogoService.getProductos().then(m=>{let h=m.find(O=>O.nombre.toLowerCase().includes(i.toLowerCase())&&O.disponible),v=h?h.precio:0,x=v*c,S=document.createElement("tr");S.dataset.producto=i,S.dataset.precio=h.precio?.toString()||"0",S.dataset.cantidad=c.toString(),S.innerHTML=`
        <td style="padding: 8px; border: 1px solid #ddd;">${i}</td>
        <td style="padding: 8px; border: 1px solid #ddd; text-align: center;">${c}</td>
        <td style="padding: 8px; border: 1px solid #ddd; text-align: right;">S/ ${v.toFixed(2)}</td>
        <td style="padding: 8px; border: 1px solid #ddd; text-align: right;">S/ ${x.toFixed(2)}</td>
        <td style="padding: 8px; border: 1px solid #ddd; text-align: center;">
          <button type="button" class="btn-eliminar-producto" 
                  style="background: #dc3545; color: white; border: none; padding: 4px 8px; border-radius: 3px; cursor: pointer; font-size: 12px;">\xD7</button>
        </td>
      `;let A=S.querySelector(".btn-eliminar-producto");A&&A.addEventListener("click",this.eliminarProductoEvent),n.appendChild(S),t.value="",e.value="1",this.calcularTotalPlatosModerno(),h||this.notificationService.warning(`Producto "${i}" no encontrado en cat\xE1logo. Precio establecido en S/ 0.00`)})}configurarBusquedaProductos(t){let e;t.addEventListener("input",()=>{clearTimeout(e),e=setTimeout(()=>{let n=t.value.toLowerCase().trim();n.length>=2?this.catalogoService.getProductos().then(i=>{let c=i.filter(m=>m.nombre.toLowerCase().includes(n)&&m.disponible).slice(0,5);this.mostrarSugerenciasProductos(c,t)}):this.ocultarSugerenciasProductos()},300)}),document.addEventListener("click",n=>{t.contains(n.target)||this.ocultarSugerenciasProductos()})}mostrarSugerenciasProductos(t,e){if(this.ocultarSugerenciasProductos(),t.length===0)return;let n=document.createElement("div");n.id="sugerenciasProductos",n.style.cssText=`
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: white;
      border: 1px solid #ddd;
      border-top: none;
      max-height: 200px;
      overflow-y: auto;
      z-index: 1000;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    `,t.forEach(c=>{let m=document.createElement("div");m.style.cssText=`
        padding: 8px 12px;
        cursor: pointer;
        border-bottom: 1px solid #eee;
        display: flex;
        justify-content: space-between;
      `,m.innerHTML=`
        <span>${c.nombre}</span>
        <span style="color: #28a745; font-weight: 500;">S/ ${c.precio.toFixed(2)}</span>
      `,m.addEventListener("mouseenter",()=>{m.style.backgroundColor="#f8f9fa"}),m.addEventListener("mouseleave",()=>{m.style.backgroundColor="white"}),m.addEventListener("click",()=>{e.value=c.nombre,this.ocultarSugerenciasProductos()}),n.appendChild(m)});let i=e.parentElement;i&&(i.style.position="relative",i.appendChild(n))}ocultarSugerenciasProductos(){let t=document.getElementById("sugerenciasProductos");t&&t.remove(),this.showSugerencias=!1,this.selectedSuggestionIndex=-1,this.sugerenciasProductos=[]}buscarProductos(t){this.buscarProductosEnCatalogo(t)}seleccionarProducto(t){this.productoSeleccionado=t,this.productoInput=t.nombre,this.showSugerencias=!1,this.sugerenciasProductos=[],setTimeout(()=>{let e=document.getElementById("cantidadInput");e&&(e.focus(),e.select())},100)}onProductoInputChange(t){this.productoInput=t,this.selectedSuggestionIndex=-1,this.buscarProductos(t)}configurarEventosTeclado(){document.addEventListener("keydown",t=>{if(!this.showSugerencias||this.sugerenciasProductos.length===0)return;let e=document.activeElement;if(e&&e.id==="productoInput")switch(t.key){case"ArrowDown":t.preventDefault(),this.selectedSuggestionIndex=Math.min(this.selectedSuggestionIndex+1,this.sugerenciasProductos.length-1),this.actualizarSeleccionVisual();break;case"ArrowUp":t.preventDefault(),this.selectedSuggestionIndex=Math.max(this.selectedSuggestionIndex-1,-1),this.actualizarSeleccionVisual();break;case"Enter":t.preventDefault(),this.selectedSuggestionIndex>=0&&this.selectedSuggestionIndex<this.sugerenciasProductos.length?this.seleccionarProducto(this.sugerenciasProductos[this.selectedSuggestionIndex]):this.sugerenciasProductos.length===1?this.seleccionarProducto(this.sugerenciasProductos[0]):this.agregarPlato();break;case"Escape":this.ocultarSugerenciasProductos();break}})}actualizarSeleccionVisual(){setTimeout(()=>{document.querySelectorAll(".producto-sugerencia").forEach((e,n)=>{n===this.selectedSuggestionIndex?(e.classList.add("selected"),e.scrollIntoView({block:"nearest"})):e.classList.remove("selected")})},10)}buscarProductosEnCatalogo(t){return C(this,null,function*(){if(t.length<1){this.sugerenciasProductos=[],this.showSugerencias=!1;return}try{let e=yield this.catalogoService.getProductos();this.sugerenciasProductos=e.filter(n=>{if(!n.disponible)return!1;let i=n.nombre.toLowerCase(),c=t.toLowerCase();if(i.startsWith(c)||i.includes(c))return!0;let m=c.split(" "),h=i.split(" ");return m.every(v=>h.some(x=>x.includes(v)))}).sort((n,i)=>{let c=n.nombre.toLowerCase().startsWith(t.toLowerCase()),m=i.nombre.toLowerCase().startsWith(t.toLowerCase());return c&&!m?-1:!c&&m?1:n.nombre.localeCompare(i.nombre)}).slice(0,8),this.showSugerencias=this.sugerenciasProductos.length>0}catch(e){console.error("Error al buscar productos:",e),this.sugerenciasProductos=[],this.showSugerencias=!1}})}eliminarProductoPedido(t){this.pedidoDetalle.splice(t,1),this.calcularTotalPlatos()}cambiarCategoriaFiltro(t){this.categoriaSeleccionada=t,this.filtrarProductosPorCategoria()}filtrarProductosPorCategoria(){return C(this,null,function*(){try{this.categoriaSeleccionada==="todos"?this.productosFiltrados=yield this.catalogoService.getProductos():this.productosFiltrados=yield this.catalogoService.getProductosPorCategoria(this.categoriaSeleccionada),this.productosFiltrados=this.productosFiltrados.filter(t=>t.disponible)}catch(t){console.error("Error al filtrar productos:",t),this.productosFiltrados=[]}})}editarCantidad(t,e){e>0&&(this.pedidoDetalle[t].cantidad=e,this.calcularTotalPlatos())}aumentarCantidad(t){this.pedidoDetalle[t].cantidad+=1,this.calcularTotalPlatos()}disminuirCantidad(t){this.pedidoDetalle[t].cantidad>1&&(this.pedidoDetalle[t].cantidad-=1,this.calcularTotalPlatos())}agregarProductoDesdeCategoria(t){let e=this.pedidoDetalle.find(n=>n.id===t.id);e?(e.cantidad+=1,this.notificationService.info(`Cantidad actualizada: ${e.nombre} (${e.cantidad})`)):(this.pedidoDetalle.push(z(V({},t),{cantidad:1})),this.notificationService.success(`Producto agregado: ${t.nombre}`)),this.calcularTotalPlatos()}calcularTotalPlatosModerno(){let t=document.getElementById("platosSeleccionados"),e=document.getElementById("totalPedido");if(!t||!e)return;let n=0;t.querySelectorAll("tr").forEach(c=>{let m=parseFloat(c.dataset.precio)||0,h=parseInt(c.dataset.cantidad)||0;n+=m*h}),e.textContent=n.toFixed(2)}eliminarProductoEvent=t=>{let n=t.target.closest("tr");n&&(n.remove(),this.calcularTotalPlatosModerno())};calcularTotalPlatos(){this.totalPedido=this.pedidoDetalle.reduce((e,n)=>e+n.precio*n.cantidad,0);let t=document.getElementById("totalPedido");t&&(t.textContent=this.totalPedido.toFixed(2))}registrarPedidoPorPlatos(t){return C(this,null,function*(){if(this.pedidoDetalle.length===0){this.notificationService.error("Debe agregar al menos un producto");return}let e="",n=0,i=[];this.pedidoDetalle.forEach((m,h)=>{let v=m.precio*m.cantidad;e+=`${h+1}. ${m.nombre} (${m.cantidad}x) - S/ ${m.precio.toFixed(2)} = S/ ${v.toFixed(2)}
`,n+=v,i.push({id:m.id||`temp_${h}`,nombre:m.nombre,precio:m.precio,cantidad:m.cantidad,categoria:m.categoria||"General",listo:!1})});let c=this.observacionInput?.trim();c&&(e+=`
Observaci\xF3n: ${c}`);try{let m=new Date;if(this.editandoPedido&&this.idPedidoEditando){let h=yield this.dexieService.getPedidoPorId(this.idPedidoEditando);if(h){let v=z(V({},h),{monto:n,detalles:e,productos:i,observacion:c||"",modificado_por:this.usuarioActual?.nombre||"Sistema",fecha_modificacion:m.toISOString()});yield this.dexieService.actualizarPedido(this.idPedidoEditando,v),this.notificationService.success(`Pedido actualizado para mesa ${t} - Total: S/ ${n.toFixed(2)}`)}this.editandoPedido=!1,this.idPedidoEditando=null}else{let h={mesa:t,monto:n,pagado:0,estado:"pendiente",fecha:m.toISOString().split("T")[0],hora:m.toLocaleTimeString(),detalles:e,mozo:this.usuarioActual?.nombre||"Sistema",tipo:"mesa",productos:i,observacion:c||"",timestamp:m.toISOString(),creado_por:this.usuarioActual?.nombre||"Sistema",tipo_pedido:"mesa",abonos:[],enviado_cocina:!1},v=yield this.dexieService.agregarPedido(h);this.socketService.isConnected()&&this.socketService.emit("nuevoPedido",{mesa:t,tipo_pedido:"mesa",id:v,productos:i}),this.notificationService.success(`Pedido registrado para mesa ${t} - Total: S/ ${n.toFixed(2)}`)}this.closeMesaModal(),yield this.renderMesas(),yield this.calcularTotales()}catch(m){console.error("Error al registrar/actualizar pedido:",m),this.notificationService.error("Error al procesar el pedido")}})}registrarPedidoPorMonto(t){return C(this,null,function*(){let e=this.montoDirecto,n=this.observacionInput||"";if(!e||e<=0){this.notificationService.error("Debe ingresar un monto v\xE1lido");return}try{let i=new Date;if(this.editandoPedido&&this.idPedidoEditando){let c={monto:e,detalles:`Pedido por monto directo: S/ ${e.toFixed(2)}${n?`
Observaci\xF3n: `+n:""}`,productos:[{id:"monto_directo",nombre:"Pedido por monto",precio:e,cantidad:1,categoria:"General",listo:!0}],observacion:n,modificado_por:this.usuarioActual?.nombre||"Sistema",fecha_modificacion:i.toISOString()};yield this.dexieService.actualizarPedido(this.idPedidoEditando,c),this.notificationService.success(`Pedido actualizado para mesa ${t} - Total: S/ ${e.toFixed(2)}`),this.editandoPedido=!1,this.idPedidoEditando=null}else{let c={mesa:t,monto:e,pagado:0,estado:"pendiente",fecha:i.toISOString().split("T")[0],hora:i.toLocaleTimeString(),detalles:`Pedido por monto directo: S/ ${e.toFixed(2)}${n?`
Observaci\xF3n: `+n:""}`,mozo:this.usuarioActual?.nombre||"Sistema",tipo:"mesa",productos:[{id:"monto_directo",nombre:"Pedido por monto",precio:e,cantidad:1,categoria:"General",listo:!0}],observacion:n,timestamp:i.toISOString(),creado_por:this.usuarioActual?.nombre||"Sistema",tipo_pedido:"mesa",abonos:[],enviado_cocina:!1},m=yield this.dexieService.agregarPedido(c);this.socketService.isConnected()&&this.socketService.emit("nuevoPedido",{mesa:t,tipo_pedido:"mesa",id:m,monto:e}),this.notificationService.success(`Pedido registrado para mesa ${t} - Total: S/ ${e.toFixed(2)}`)}this.closeMesaModal(),yield this.renderMesas(),yield this.calcularTotales()}catch(i){console.error("Error al registrar/actualizar pedido:",i),this.notificationService.error("Error al procesar el pedido")}})}crearPedidoParaLlevar(){this.modalType="para-llevar",this.showMesaModal=!0}crearPedidoDelivery(){this.modalType="delivery",this.showMesaModal=!0}establecerCajaApertura(t){if(t<=0){alert("El monto debe ser mayor a 0");return}let n={fecha:new Date().toISOString().split("T")[0],montoInicial:t,efectivo:0,yape:0,tarjeta:0,total:0,ganancia:0};this.dexieService.iniciarCaja(n).then(()=>{this.cajaApertura=t,this.calcularTotales(),this.notificationService.success("Caja inicial establecida correctamente")})}reconnectAttempts=0;maxReconnectAttempts=10;reconnectDelay=1e3;heartbeatInterval;eventQueue=[];isOnline=!0;configurarEventosSocket(){this.socketService.listen("connect").subscribe(()=>{console.log("Conectado al servidor Socket.IO"),this.notificationService.success("Conectado al servidor"),this.isOnline=!0,this.reconnectAttempts=0,this.reconnectDelay=1e3,this.iniciarHeartbeat(),this.procesarColaEventos()}),this.socketService.listen("disconnect").subscribe(()=>{console.log("Desconectado del servidor Socket.IO"),this.notificationService.warning("Desconectado del servidor"),this.isOnline=!1,this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.reconectarConBackoff()}),this.socketService.listen("pong").subscribe(()=>{console.log("Heartbeat recibido del servidor")}),this.socketService.listen("inventarioActualizado").subscribe(t=>{console.log("Inventario actualizado:",t),this.sincronizarInventario(t)}),this.socketService.listen("productoActualizado").subscribe(t=>{console.log("Producto actualizado:",t),this.sincronizarInventario({productos:[t]})}),this.authService.isCaja()&&(this.socketService.listen("nuevoPedido").subscribe(t=>{t.tipo==="llevar"||t.tipo==="delivery"?this.notificationService.success(`Nuevo pedido ${t.tipo} recibido - Cliente: ${t.cliente}`):this.notificationService.success(`Nuevo pedido recibido - Mesa ${t.mesa} - ${t.items?.length||0} items`),this.sincronizarDatos()}),this.socketService.listen("nuevoPedidoEspecial").subscribe(t=>{this.notificationService.success(`Nuevo pedido ${t.tipo} recibido - Cliente: ${t.cliente}`),this.sincronizarDatos()}),this.socketService.listen("pagoRealizado").subscribe(t=>{t.tipo==="especial"?this.notificationService.success(`Pago recibido - Cliente: ${t.cliente} - Monto: S/${t.monto}`):this.notificationService.success(`Pago recibido - Mesa ${t.mesa} - Monto: S/${t.monto}`),this.sincronizarDatos()}),this.socketService.listen("pedidoEspecialAnulado").subscribe(t=>{this.notificationService.info(`Pedido anulado - Cliente: ${t.cliente}`),this.sincronizarDatos()}),this.socketService.listen("pedidoListo").subscribe(t=>{this.notificationService.success(`Pedido listo para entrega - Mesa ${t.mesa}`),this.mostrarAlertaVisualPedidoListo(),this.sincronizarDatos()}),this.socketService.listen("cajaActualizada").subscribe(t=>{console.log("Caja actualizada:",t),this.actualizarTotalCaja(t)}),this.socketService.listen("totalDiaActualizado").subscribe(t=>{console.log("Total del d\xEDa actualizado:",t),this.totalDia=t})),this.authService.isMoso()&&(this.socketService.listen("respuestaCaja").subscribe(t=>{this.notificationService.info(`Respuesta de caja: ${t.mensaje}`),this.sincronizarDatos()}),this.socketService.listen("pedidoAprobado").subscribe(t=>{this.notificationService.success(`Pedido aprobado - Mesa ${t.mesa}`),this.sincronizarDatos()})),this.authService.isCocina()&&(this.socketService.listen("pedidoRecibido").subscribe(t=>{this.notificationService.info(`Nuevo pedido para cocina - Mesa ${t.mesa} - ${t.items?.length||0} items`),this.reproducirSonidoNuevoPedido(),this.sincronizarDatos()}),this.socketService.listen("pedidoCancelado").subscribe(t=>{this.notificationService.warning(`Pedido cancelado - Mesa ${t.mesa}`),this.sincronizarDatos()}),this.socketService.listen("estadoCocinaActualizado").subscribe(t=>{console.log("Estado de cocina actualizado:",t),this.actualizarEstadoCocina(t)}),this.socketService.listen("tiempoPreparacionActualizado").subscribe(t=>{console.log("Tiempo de preparaci\xF3n actualizado:",t),this.actualizarEstadoCocina({tiempoPreparacion:t})}),this.socketService.listen("pedidoEnPreparacion").subscribe(t=>{this.notificationService.info(`Pedido en preparaci\xF3n - Mesa ${t.mesa} - Tiempo estimado: ${t.tiempoEstimado} min`)})),this.socketService.listen("estadoMesaActualizado").subscribe(t=>{console.log("Estado de mesa actualizado:",t),this.actualizarEstadoMesa(t)}),this.socketService.listen("sincronizarDatos").subscribe(()=>{console.log("Solicitud de sincronizaci\xF3n recibida"),this.sincronizarDatos()}),this.socketService.mesasEstado$.subscribe(t=>{console.log("\u{1F504} Estado de mesas actualizado desde observable:",t),t&&t.length>0&&this.actualizarMesasDesdeObservable(t)}),this.socketService.pedidosActivos$.subscribe(t=>{console.log("\u{1F504} Pedidos de mesa actualizados desde observable:",t),t&&this.renderMesas()}),this.socketService.pedidosDelivery$.subscribe(t=>{console.log("\u{1F504} Pedidos delivery actualizados desde observable:",t),t&&(this.pedidosDelivery=t)}),this.socketService.pedidosLlevar$.subscribe(t=>{console.log("\u{1F504} Pedidos para llevar actualizados desde observable:",t),t&&(this.pedidosParaLlevar=t)}),this.socketService.todosPedidos$.subscribe(t=>{console.log("\u{1F504} Todos los pedidos actualizados desde observable:",t)}),this.socketService.connectionStatus$.subscribe(t=>{console.log("\u{1F504} Estado de conexi\xF3n actualizado:",t),this.isOnline=t,t?this.notificationService.success("Conectado al servidor"):this.notificationService.warning("Desconectado del servidor")})}actualizarMesasDesdeObservable(t){console.log("\u{1F4CB} Actualizando mesas desde observable:",t),t.forEach(e=>{let n=this.mesas.findIndex(i=>i.numero===e.numero);n!==-1?this.mesas[n]=V(V({},this.mesas[n]),e):this.mesas.push(e)}),this.renderMesas(),this.cdr.detectChanges()}exportarBD(){this.dexieService.exportarDB().then(t=>{let e=new Blob([JSON.stringify(t)],{type:"application/json"}),n=URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download=`festejos_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)})}importarBD(t){let e=t.target.files[0];if(!e)return;let n=new FileReader;n.onload=i=>{try{let c=JSON.parse(i.target?.result||"");this.dexieService.importarDB(c).then(()=>{this.notificationService.success("Base de datos importada correctamente"),this.cargarDatos()})}catch(c){alert("Error al importar la base de datos"),console.error(c)}},n.readAsText(e)}limpiarBD(){confirm("\xBFEst\xE1 seguro de limpiar la base de datos? Esta acci\xF3n no se puede deshacer.")&&this.dexieService.limpiarDB().then(()=>{this.notificationService.success("Base de datos limpiada correctamente"),this.cargarDatos()})}registrarPedidoParaLlevar(){return C(this,null,function*(){if(!this.nombreClienteEspecial||!this.montoEspecial){this.notificationService.error("Debe completar todos los campos obligatorios");return}if(this.montoEspecial<=0){this.notificationService.error("Debe ingresar un monto v\xE1lido");return}try{let t={cliente:this.nombreClienteEspecial,monto:this.montoEspecial,pagado:0,estado:"pendiente",fecha:new Date().toISOString().split("T")[0],hora:new Date().toLocaleTimeString(),observacion:this.observacionEspecial||"",tipo:"llevar"};yield this.dexieService.agregarPedidoEspecial(t),this.notificationService.success("Pedido para llevar registrado correctamente"),this.closeMesaModal(),this.limpiarFormularioEspecial(),yield this.cargarPedidosParaLlevar(),yield this.calcularTotales()}catch(t){console.error("Error al registrar pedido para llevar:",t),this.notificationService.error("Error al registrar el pedido")}})}registrarPedidoDelivery(){return C(this,null,function*(){if(!this.nombreClienteEspecial){this.notificationService.error("Debe ingresar el nombre del cliente");return}try{let t={cliente:this.nombreClienteEspecial,direccion:this.direccionEspecial,telefono:this.telefonoEspecial||"",monto:this.montoEspecial,pagado:0,estado:"pendiente",fecha:new Date().toISOString().split("T")[0],hora:new Date().toLocaleTimeString(),observacion:this.observacionEspecial||"",tipo:"delivery"};yield this.dexieService.agregarPedidoEspecial(t),this.notificationService.success("Pedido delivery registrado correctamente"),this.closeMesaModal(),this.limpiarFormularioEspecial(),yield this.cargarPedidosDelivery(),yield this.calcularTotales()}catch(t){console.error("Error al registrar pedido delivery:",t),this.notificationService.error("Error al registrar el pedido")}})}nombreClienteEspecial="";direccionEspecial="";telefonoEspecial="";montoEspecial=0;observacionEspecial="";pedidoEspecialSeleccionado=null;montoAbonoPedidoEspecial=0;limpiarFormularioEspecial(){this.nombreClienteEspecial="",this.direccionEspecial="",this.telefonoEspecial="",this.montoEspecial=0,this.observacionEspecial=""}procesarPagoPedidoEspecial(){return C(this,null,function*(){if(!this.pedidoEspecialSeleccionado||!this.selectedPaymentMethod||this.montoAbonoPedidoEspecial<=0){this.notificationService.error("Debe completar todos los campos");return}let t=this.pedidoEspecialSeleccionado.monto-(this.pedidoEspecialSeleccionado.pagado||0);if(this.montoAbonoPedidoEspecial>t){this.notificationService.error("El monto no puede ser mayor al saldo pendiente");return}try{yield this.dexieService.abonarPedidoEspecial(this.pedidoEspecialSeleccionado.id,this.montoAbonoPedidoEspecial,this.selectedPaymentMethod),this.socketService.emit("pagoRealizado",{tipo:"especial",id:this.pedidoEspecialSeleccionado.id,cliente:this.pedidoEspecialSeleccionado.cliente,monto:this.montoAbonoPedidoEspecial,metodoPago:this.selectedPaymentMethod,fecha:new Date().toISOString().split("T")[0],hora:new Date().toLocaleTimeString(),usuario:this.usuarioActual?.nombre||"Usuario"}),this.notificationService.success("Pago registrado correctamente"),this.closeMesaModal(),yield this.cargarPedidosParaLlevar(),yield this.cargarPedidosDelivery(),yield this.calcularTotales(),yield this.cargarHistorialPagados()}catch(e){console.error("Error al procesar pago:",e),this.notificationService.error("Error al procesar el pago")}})}anularPedidoEspecial(t){return C(this,null,function*(){if(!t||!t.id){this.notificationService.error("Pedido no v\xE1lido");return}try{yield this.dexieService.anularPedidoEspecial(t.id),this.socketService.emit("pedidoEspecialAnulado",{id:t.id,tipo:t.tipo,cliente:t.cliente,monto:t.monto,fecha:new Date().toISOString().split("T")[0],hora:new Date().toLocaleTimeString(),usuario:this.usuarioActual?.nombre||"Usuario"}),this.notificationService.success("Pedido anulado correctamente"),yield this.cargarPedidosParaLlevar(),yield this.cargarPedidosDelivery(),yield this.calcularTotales()}catch(e){console.error("Error al anular pedido:",e),this.notificationService.error("Error al anular el pedido")}})}sincronizarDatos(){return C(this,null,function*(){try{yield this.cargarDatos(),yield this.cargarPedidosParaLlevar(),yield this.cargarPedidosDelivery(),yield this.cargarHistorialPagados(),yield this.calcularTotales(),yield this.renderMesas(),this.cdr.detectChanges()}catch(t){console.error("Error al sincronizar datos:",t)}})}generarReporte(){return C(this,null,function*(){if(!this.fechaInicioReporte||!this.fechaFinReporte){this.notificationService.error("Por favor selecciona ambas fechas");return}try{let t=yield this.dexieService.getHistorialPagos(),e=new Date(this.fechaInicioReporte),n=new Date(this.fechaFinReporte);n.setHours(23,59,59,999);let i=t.filter(c=>{let m=new Date(c.fecha);return m>=e&&m<=n});this.efectivoReporte=0,this.yapeReporte=0,this.tarjetaReporte=0,this.totalReporte=0,i.forEach(c=>{let m=c.total||0;switch(this.totalReporte+=m,c.metodoPago?.toLowerCase()){case"efectivo":this.efectivoReporte+=m;break;case"yape":this.yapeReporte+=m;break;case"tarjeta":this.tarjetaReporte+=m;break}}),this.gananciaReporte=this.totalReporte,this.detallesReporte=i.sort((c,m)=>new Date(m.fecha).getTime()-new Date(c.fecha).getTime()),this.mostrarResumenReporte=!0,this.notificationService.success(`Reporte generado: ${i.length} pagos encontrados`)}catch(t){console.error("Error al generar reporte:",t),this.notificationService.error("Error al generar el reporte")}})}generarGraficaPlatos(){if(!this.mostrarResumenReporte){this.notificationService.error("Primero genera un reporte");return}this.notificationService.info("Funcionalidad de gr\xE1ficas en desarrollo")}configurarEventosSocketMesas(){this.socketService.on("estadoMesaActualizado",t=>{this.actualizarEstadoMesa(t)}),this.socketService.on("pedidosActivosEnMesas",t=>{this.actualizarPedidosEnMesas(t)})}configurarReconexionSocket(){setInterval(()=>{this.socketService.isConnected()||(console.log("Intentando reconectar Socket.IO..."),this.socketService.connect({usuario:this.usuarioActual?.nombre||"Usuario"}))},3e4)}actualizarEstadoMesa(t){t&&t.numeroMesa&&this.mesas[t.numeroMesa-1]&&(this.mesas[t.numeroMesa-1].estado=t.estado,this.mesas[t.numeroMesa-1].pedidoActivo=t.pedidoActivo,this.cdr.detectChanges())}actualizarMesasDesdeServidor(){this.socketService.emit("solicitarEstadoMesas",{restaurante:"principal",timestamp:new Date().toISOString()})}actualizarPedidosEnMesas(t){t&&Array.isArray(t.pedidos)&&(t.pedidos.forEach(e=>{e.numeroMesa&&this.mesas[e.numeroMesa-1]&&(this.mesas[e.numeroMesa-1].pedidoActivo=e)}),this.cdr.detectChanges())}iniciarHeartbeat(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=setInterval(()=>{this.socketService.isConnected()&&this.socketService.emit("ping",{timestamp:Date.now()})},3e4)}reconectarConBackoff(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.log("M\xE1ximo n\xFAmero de intentos de reconexi\xF3n alcanzado"),this.mostrarAlertaConexion(!1);return}let t=Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4);this.reconnectDelay=t,this.reconnectAttempts++,console.log(`Reintentando conexi\xF3n en ${t}ms (intento ${this.reconnectAttempts})`),setTimeout(()=>{this.socketService.connect({usuario:this.usuarioActual?.nombre||"Usuario"})},t)}procesarColaEventos(){if(this.eventQueue.length===0)return;console.log(`Procesando ${this.eventQueue.length} eventos en cola`);let t=[...this.eventQueue];this.eventQueue=[],t.forEach(e=>{try{this.socketService.emit(e.tipo,e.data)}catch(n){console.error("Error al procesar evento en cola:",n),this.eventQueue.push(e)}})}mostrarAlertaConexion(t){t?this.notificationService.success("Conexi\xF3n Socket.IO establecida"):this.notificationService.warning("Conexi\xF3n Socket.IO perdida. Reintentando...")}sincronizarInventario(t){try{t&&t.productos&&(this.catalogoProductos=t.productos,this.cdr.detectChanges(),console.log("Inventario sincronizado desde servidor"))}catch(e){console.error("Error al sincronizar inventario:",e)}}actualizarTotalCaja(t){try{t&&(t.efectivoTotal!==void 0&&(this.efectivoTotal=t.efectivoTotal),t.totalDia!==void 0&&(this.totalDia=t.totalDia),this.cdr.detectChanges(),console.log("Totales de caja actualizados en tiempo real"))}catch(e){console.error("Error al actualizar totales de caja:",e)}}actualizarEstadoCocina(t){try{t&&(t.estadoCocina&&console.log("Estado de cocina actualizado:",t.estadoCocina),t.tiempoPreparacion&&console.log("Tiempo de preparaci\xF3n actualizado:",t.tiempoPreparacion),t.pedidoId&&t.estado&&console.log(`Pedido ${t.pedidoId} cambi\xF3 a estado: ${t.estado}`),this.cdr.detectChanges())}catch(e){console.error("Error al actualizar estado de cocina:",e)}}reproducirSonidoPedidoListo(){try{new Audio("assets/sounds/pedido-listo.mp3").play().catch(e=>{console.log("No se pudo reproducir sonido de pedido listo:",e)})}catch(t){console.log("Error al reproducir sonido:",t)}}reproducirSonidoNuevoPedido(){try{new Audio("assets/sounds/nuevo-pedido.mp3").play().catch(e=>{console.log("No se pudo reproducir sonido de nuevo pedido:",e)})}catch(t){console.log("Error al reproducir sonido:",t)}}mostrarAlertaVisualPedidoListo(){this.notificationService.info("\xA1Pedido listo para entregar!")}static \u0275fac=function(e){return new(e||s)(T(xe),T(Se),T(W),T(Pe),T(Ce),T(se))};static \u0275cmp=L({type:s,selectors:[["app-home"]],viewQuery:function(e,n){if(e&1&&K(Ve,5),e&2){let i;X(i=Z())&&(n.fileInput=i.first)}},decls:46,vars:13,consts:[["abonoForm",""],[1,"navbar"],[1,"navbar-container"],[1,"navbar-brand"],[1,"brand-icon"],[1,"brand-text"],[1,"navbar-menu"],["routerLink","/",1,"navbar-item"],["routerLink","/catalogo","class","navbar-item",4,"ngIf"],["routerLink","/historial","class","navbar-item",4,"ngIf"],["routerLink","/productividad","class","navbar-item",4,"ngIf"],[1,"navbar-controls"],[1,"date-display"],["id","toggleDarkMode","title","Modo oscuro",1,"control-btn","dark-mode-btn"],["title","Cambiar usuario",1,"control-btn","user-btn",3,"click"],["id","installBtn","title","Instalar app",1,"control-btn","install-btn",2,"display","none"],["id","mobileMenuBtn",1,"mobile-menu-btn"],["id","mobileMenu",1,"mobile-menu"],["routerLink","/",1,"mobile-menu-item"],["routerLink","/catalogo","class","mobile-menu-item",4,"ngIf"],["routerLink","/historial","class","mobile-menu-item",4,"ngIf"],["routerLink","/productividad","class","mobile-menu-item",4,"ngIf"],[1,"main-container"],["id","loadingMessage","class","loading",4,"ngIf"],["id","mainApp",4,"ngIf"],["id","mesaModal",2,"display","none","position","fixed","z-index","3000","left","0","top","0","width","100vw","height","100vh","background","rgba(0,0,0,0.27)","align-items","center","justify-content","center"],["id","mesaModalContent",2,"background","#fff","padding","30px 24px","border-radius","16px","min-width","310px","min-height","150px","box-shadow","0 8px 40px rgba(0, 0, 0, 0.16)"],["class","resumen-pagados-section",4,"ngIf"],["id","vistaCocina","style","display:block;max-width:900px;margin:auto;",4,"ngIf"],["style",`
    position:fixed; 
    z-index:3000; 
    left:0; 
    top:0; 
    width:100vw; 
    height:100vh; 
    background:rgba(0,0,0,0.27); 
    display:flex;
    align-items:center; 
    justify-content:center;
`,4,"ngIf"],[3,"loginSuccess","closeModal","isVisible"],["id","alertaPedidoListo",2,"display","none","position","fixed","top","50%","left","50%","transform","translate(-50%,-50%)","background","#3fa943","color","#fff","padding","22px 38px","border-radius","16px","box-shadow","0 6px 24px #0005","z-index","9000","min-width","220px","max-width","90vw","text-align","center"],["id","alertaMsg"],["id","barraCarga",2,"margin-top","12px","background","#fff3","border-radius","8px","height","9px","width","100%"],["id","barraProgreso",2,"height","100%","background","#fff","width","0%","border-radius","8px"],[2,"margin-top","10px","background","#fff2","border","none","color","#fff","border-radius","6px","padding","4px 16px","cursor","pointer",3,"click"],["routerLink","/catalogo",1,"navbar-item"],["routerLink","/historial",1,"navbar-item"],["routerLink","/productividad",1,"navbar-item"],["routerLink","/catalogo",1,"mobile-menu-item"],["routerLink","/historial",1,"mobile-menu-item"],["routerLink","/productividad",1,"mobile-menu-item"],["id","loadingMessage",1,"loading"],["id","mainApp"],["class","form-section",4,"ngIf"],[1,"mesas-section"],[2,"margin-top","25px","text-align","center"],["id","mesasGrid",1,"mesas-grid"],["class","mesa-btn",3,"ngClass","click","contextmenu",4,"ngFor","ngForOf"],["class","pedidos-especiales-section",4,"ngIf"],["class","stats-grid",4,"ngIf"],[1,"form-section"],[2,"font-size","1.5rem"],[1,"form-group"],["for","cajaApertura"],["type","number","id","cajaApertura","placeholder","0.00","step","0.01",3,"ngModelChange","ngModel"],[1,"form-buttons"],["id","btnCajaApertura",1,"btn",3,"click"],["title","El cierre autom\xE1tico se ejecuta a las 11:00 PM o al cambiar de d\xEDa",1,"btn",3,"click","ngClass"],[1,"mesa-btn",3,"click","contextmenu","ngClass"],[1,"mesa-num"],["class","mesa-monto",4,"ngIf"],[1,"mesa-monto"],["style","font-size:0.9em",4,"ngIf"],[2,"font-size","0.9em"],[1,"pedidos-especiales-section"],[2,"text-align","center","margin","20px 0 20px 0"],[1,"pedidos-especiales-grid"],["id","boxParaLlevar",1,"pedido-especial-box"],["id","btnParaLlevar",1,"btn-pedido-especial",3,"click"],["id","tablaParaLlevar",1,"tabla-pedidos-especiales"],[4,"ngFor","ngForOf"],["id","boxDelivery",1,"pedido-especial-box"],["id","btnDelivery",1,"btn-pedido-especial",3,"click"],["id","tablaDelivery",1,"tabla-pedidos-especiales"],["class","estado-pendiente",4,"ngIf"],["class","estado-parcial",4,"ngIf"],["class","estado-pagado",4,"ngIf"],["class","btn-small",3,"click",4,"ngIf"],["class","btn-small","disabled","",4,"ngIf"],[1,"estado-pendiente"],[1,"estado-parcial"],[1,"estado-pagado"],[1,"btn-small",3,"click"],["disabled","",1,"btn-small"],[1,"stats-grid"],[1,"summary-cards"],[1,"summary-card","efectivo"],[1,"amount"],[1,"summary-card","yape"],[1,"summary-card","tarjeta"],[1,"summary-card","total-dia"],[1,"summary-card","ganancia"],[1,"resumen-pagados-section"],[2,"margin","20px 0 20px 0","font-size","1.8em"],["id","resumenPagadosTable"],[1,"tabla-historial"],["style","margin-bottom: 2px;",4,"ngFor","ngForOf"],[2,"margin-bottom","2px"],[2,"font-weight","bold"],["id","vistaCocina",2,"display","block","max-width","900px","margin","auto"],["id","listaComandas"],[2,"position","fixed","z-index","3000","left","0","top","0","width","100vw","height","100vh","background","rgba(0,0,0,0.27)","display","flex","align-items","center","justify-content","center"],[2,"background","#fff","padding","30px 24px","border-radius","16px","min-width","310px","min-height","150px","box-shadow","0 8px 40px rgba(0, 0, 0, 0.16)"],[4,"ngIf"],[2,"text-align","center","margin-bottom","1.5rem","color","#666"],[1,"modal-buttons","four-buttons"],[1,"btn",3,"click"],[1,"btn-secondary",3,"click"],[1,"btn-cancelar",3,"click"],[2,"background","#f8f9fa","padding","1rem","border-radius","8px","margin","1rem 0"],[2,"margin-bottom","0.5rem"],[3,"innerHTML",4,"ngIf"],[2,"font-weight","bold","color","#e74c3c","font-size","1.1rem"],["autocomplete","off","style","margin-top:8px;",3,"ngSubmit",4,"ngIf"],[1,"modal-buttons","four-buttons",2,"margin-top","15px"],["class","btn-secondary",3,"disabled","click",4,"ngIf"],[1,"btn-secondary",3,"click","disabled"],[3,"innerHTML"],["autocomplete","off",2,"margin-top","8px",3,"ngSubmit"],["type","number","step","0.01","name","abono","required","",2,"width","100%","padding","7px","border-radius","8px","border","1.5px solid #ccc",3,"min","max","placeholder"],[2,"display","flex","gap","10px","margin","10px 0"],["type","button",1,"btn-medio","btn-efectivo",3,"click"],["type","button",1,"btn-medio","btn-yape",3,"click"],["type","button",1,"btn-medio","btn-tarjeta",3,"click"],["type","hidden","name","tipo_pago","required","",3,"value"],["type","submit",1,"btn",2,"margin-top","12px"],[1,"modal-buttons"],[2,"margin-bottom","15px"],["for","productoInput"],[2,"position","relative"],["type","text","id","productoInput","placeholder","Buscar producto...","autocomplete","off",2,"width","100%","padding","7px","border-radius","8px","border","1.5px solid #ccc",3,"ngModelChange","input","ngModel"],["style","position: absolute; width: 100%; background: white; border: 1px solid #ccc; border-top: none; border-radius: 0 0 8px 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); z-index: 1000; max-height: 250px; overflow-y: auto;",4,"ngIf"],[2,"display","flex","gap","10px","margin-bottom","15px"],[2,"flex","1"],["for","cantidadInput"],["type","number","id","cantidadInput","min","1","value","1",2,"width","100%","padding","7px","border-radius","8px","border","1.5px solid #ccc",3,"ngModelChange","ngModel"],[2,"flex","1","display","flex","align-items","end"],["type","button",1,"btn",2,"width","100%",3,"click"],["style","margin-bottom: 15px;",4,"ngIf"],["for","observacionPedido"],["id","observacionPedido","rows","2","placeholder","Observaciones del pedido...",2,"width","100%","padding","7px","border-radius","8px","border","1.5px solid #ccc","resize","vertical",3,"ngModelChange","ngModel"],[2,"display","flex","gap","10px"],["type","button",1,"btn",3,"click","disabled"],["type","button",1,"btn-secondary",3,"click"],[2,"position","absolute","width","100%","background","white","border","1px solid #ccc","border-top","none","border-radius","0 0 8px 8px","box-shadow","0 2px 8px rgba(0,0,0,0.1)","z-index","1000","max-height","250px","overflow-y","auto"],["class","producto-sugerencia",3,"click",4,"ngFor","ngForOf"],[1,"producto-sugerencia",3,"click"],[2,"color","#666"],[2,"color","#28a745","font-weight","600"],[2,"max-height","200px","overflow-y","auto","border","1px solid #ccc","border-radius","8px"],[2,"width","100%","border-collapse","collapse"],[2,"background","#f5f5f5"],[2,"padding","8px","border-bottom","1px solid #ddd","text-align","left"],[2,"padding","8px","border-bottom","1px solid #ddd","text-align","center"],[2,"padding","8px","border-bottom","1px solid #ddd","text-align","right"],[2,"text-align","right","margin-top","10px","font-weight","bold","font-size","1.1em"],[2,"padding","8px","border-bottom","1px solid #eee"],[2,"padding","8px","border-bottom","1px solid #eee","text-align","center"],[2,"display","flex","align-items","center","justify-content","center","gap","5px"],["type","button",2,"background","#6c757d","color","white","border","none","border-radius","3px","padding","2px 6px","cursor","pointer","font-size","12px",3,"click","disabled"],[2,"min-width","20px","text-align","center"],["type","button",2,"background","#28a745","color","white","border","none","border-radius","3px","padding","2px 6px","cursor","pointer","font-size","12px",3,"click"],[2,"padding","8px","border-bottom","1px solid #eee","text-align","right"],["type","button",2,"background","#dc3545","color","white","border","none","border-radius","4px","padding","2px 6px","cursor","pointer",3,"click"],["for","montoDirecto"],["type","number","id","montoDirecto","step","0.01","min","0.01","placeholder","Ingrese el monto total",2,"width","100%","padding","7px","border-radius","8px","border","1.5px solid #ccc",3,"ngModelChange","ngModel"],["for","observacionMonto"],["id","observacionMonto","rows","3","placeholder","Descripci\xF3n del pedido...",2,"width","100%","padding","7px","border-radius","8px","border","1.5px solid #ccc","resize","vertical",3,"ngModelChange","ngModel"],["for","nombreParaLlevar"],["type","text","id","nombreParaLlevar","placeholder","Nombre del cliente",2,"width","100%","padding","7px","border-radius","8px","border","1.5px solid #ccc",3,"ngModelChange","ngModel"],["for","montoParaLlevar"],["type","number","id","montoParaLlevar","step","0.01","min","0.01","placeholder","Monto total",2,"width","100%","padding","7px","border-radius","8px","border","1.5px solid #ccc",3,"ngModelChange","ngModel"],["for","observacionParaLlevar"],["id","observacionParaLlevar","rows","2","placeholder","Descripci\xF3n del pedido (opcional)",2,"width","100%","padding","7px","border-radius","8px","border","1.5px solid #ccc","resize","vertical",3,"ngModelChange","ngModel"],["for","nombreDelivery"],["type","text","id","nombreDelivery","placeholder","Nombre del cliente",2,"width","100%","padding","7px","border-radius","8px","border","1.5px solid #ccc",3,"ngModelChange","ngModel"],["for","direccionDelivery"],["type","text","id","direccionDelivery","placeholder","Direcci\xF3n de entrega (opcional)",2,"width","100%","padding","7px","border-radius","8px","border","1.5px solid #ccc",3,"ngModelChange","ngModel"],["for","telefonoDelivery"],["type","tel","id","telefonoDelivery","placeholder","Tel\xE9fono (opcional)",2,"width","100%","padding","7px","border-radius","8px","border","1.5px solid #ccc",3,"ngModelChange","ngModel"],["for","montoDelivery"],["type","number","id","montoDelivery","step","0.01","min","0","placeholder","0",2,"width","100%","padding","7px","border-radius","8px","border","1.5px solid #ccc",3,"ngModelChange","ngModel"],["for","observacionDelivery"],["id","observacionDelivery","rows","2","placeholder","Descripci\xF3n del pedido (opcional)",2,"width","100%","padding","7px","border-radius","8px","border","1.5px solid #ccc","resize","vertical",3,"ngModelChange","ngModel"],["style","margin-top: 15px; padding: 10px; background-color: #f8f9fa; border-radius: 5px;",4,"ngIf"],["for","montoAbonoPedidoEspecial"],["type","number","id","montoAbonoPedidoEspecial","step","0.01","placeholder","Monto a pagar",2,"width","100%","padding","7px","border-radius","8px","border","1.5px solid #ccc",3,"ngModelChange","ngModel","min","max"],[2,"margin-top","15px","padding","10px","background-color","#f8f9fa","border-radius","5px"],["style","font-size:0.97em; color:#444; margin-bottom:2px;",4,"ngFor","ngForOf"],[2,"font-size","0.97em","color","#444","margin-bottom","2px"]],template:function(e,n){e&1&&(a(0,"nav",1)(1,"div",2)(2,"div",3)(3,"span",4),r(4,"\u{1F37D}\uFE0F"),o(),a(5,"span",5),r(6,"FESTEJOS"),o()(),a(7,"div",6)(8,"a",7),r(9,"Inicio"),o(),f(10,Fe,2,0,"a",8)(11,He,2,0,"a",9)(12,je,2,0,"a",10),o(),a(13,"div",11)(14,"span",12),r(15),o(),a(16,"button",13),r(17,"\u{1F319}"),o(),a(18,"button",14),_("click",function(){return n.logout()}),r(19,"\u{1F464}"),o(),a(20,"button",15),r(21,"\u2B07\uFE0F"),o(),a(22,"button",16),r(23,"\u2630"),o()()(),a(24,"div",17)(25,"a",18),r(26,"Inicio"),o(),f(27,Re,2,0,"a",19)(28,Be,2,0,"a",20)(29,$e,2,0,"a",21),o()(),a(30,"div",22),f(31,Ne,2,0,"div",23)(32,dt,9,4,"div",24),a(33,"div",25),E(34,"div",26),o(),f(35,mt,19,1,"div",27)(36,pt,4,0,"div",28),o(),f(37,Vt,13,11,"div",29),a(38,"app-login-modal",30),_("loginSuccess",function(c){return n.onLoginSuccess(c)})("closeModal",function(){return n.onCloseLoginModal()}),o(),a(39,"div",31),E(40,"div",32),a(41,"div",33),E(42,"div",34),o(),a(43,"button",35),_("click",function(){return n.notificationService.cerrarAlerta()}),r(44,"Cerrar"),o()(),r(45," ```\n")),e&2&&(d(10),g("ngIf",n.authService.isCaja()),d(),g("ngIf",n.authService.isCaja()),d(),g("ngIf",n.authService.isCaja()),d(3),I(n.fechaActual),d(12),g("ngIf",n.authService.isCaja()),d(),g("ngIf",n.authService.isCaja()),d(),g("ngIf",n.authService.isCaja()),d(2),g("ngIf",!n.authService.isAuthenticated()),d(),g("ngIf",n.authService.isAuthenticated()&&!n.authService.isCocina()),d(3),g("ngIf",n.authService.isCaja()),d(),g("ngIf",n.authService.isCocina()),d(),g("ngIf",n.showMesaModal),d(),g("isVisible",n.showLoginModal))},dependencies:[j,de,ce,H,N,ge,R,_e,B,pe,be,he,$,ue,fe,ve,U,le,me],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}[_nghost-%COMP%]{display:block;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;min-height:100vh;background:#f8f9fa}[_nghost-%COMP%]{--bg-primary: #ffffff;--bg-secondary: #f8f9fa;--text-primary: #2c3e50;--text-secondary: #6c757d;--border-color: #dee2e6;--shadow: 0 2px 10px rgba(0, 0, 0, .1);--navbar-bg: #ffffff;--navbar-shadow: 0 2px 4px rgba(0, 0, 0, .1)}.dark-mode[_nghost-%COMP%]{--bg-primary: #2c3e50;--bg-secondary: #34495e;--text-primary: #ecf0f1;--text-secondary: #bdc3c7;--border-color: #4a5568;--shadow: 0 2px 10px rgba(0, 0, 0, .3);--navbar-bg: #2c3e50;--navbar-shadow: 0 2px 4px rgba(0, 0, 0, .3)}.navbar[_ngcontent-%COMP%]{background:var(--navbar-bg);box-shadow:var(--navbar-shadow);position:sticky;top:0;z-index:1000;transition:all .3s ease}.navbar-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:0 1rem;height:60px}.navbar-brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:700;color:var(--text-primary)}.brand-icon[_ngcontent-%COMP%]{font-size:1.5rem}.brand-text[_ngcontent-%COMP%]{font-size:1.2rem;display:none}.navbar-menu[_ngcontent-%COMP%]{display:none;gap:2rem}.navbar-item[_ngcontent-%COMP%]{color:var(--text-primary);text-decoration:none;padding:.5rem 1rem;border-radius:6px;transition:all .2s ease;font-weight:500}.navbar-item[_ngcontent-%COMP%]:hover{background:var(--bg-secondary);color:#4a6fa5}.navbar-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.date-display[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem;display:none}.control-btn[_ngcontent-%COMP%]{background:var(--bg-secondary);color:var(--text-primary);border:none;border-radius:6px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;font-size:1rem}.control-btn[_ngcontent-%COMP%]:hover{background:#4a6fa5;color:#fff;transform:translateY(-1px)}.mobile-menu-btn[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-primary);font-size:1.2rem;cursor:pointer;padding:.5rem;border-radius:4px;transition:background .2s ease}.mobile-menu-btn[_ngcontent-%COMP%]:hover{background:var(--bg-secondary)}.mobile-menu[_ngcontent-%COMP%]{display:none;background:var(--navbar-bg);border-top:1px solid var(--border-color);padding:1rem 0}.mobile-menu.show[_ngcontent-%COMP%]{display:block}.mobile-menu-item[_ngcontent-%COMP%]{display:block;color:var(--text-primary);text-decoration:none;padding:.75rem 1rem;transition:background .2s ease}.mobile-menu-item[_ngcontent-%COMP%]:hover{background:var(--bg-secondary)}.main-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem 1rem;min-height:calc(100vh - 60px)}.form-section[_ngcontent-%COMP%]{background:var(--bg-primary);padding:1.5rem;border-radius:12px;margin-bottom:2rem;box-shadow:var(--shadow);border:1px solid var(--border-color)}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-primary);margin-bottom:1rem;font-size:1.3rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:var(--text-primary)}.form-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap;margin-top:1rem}.form-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;min-width:200px}input[type=number][_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid var(--border-color);border-radius:8px;font-size:1rem;background:var(--bg-primary);color:var(--text-primary);transition:border-color .2s ease}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#4a6fa5}.btn[_ngcontent-%COMP%]{background:#4a6fa5;color:#fff;border:none;border-radius:8px;padding:.75rem 1.5rem;font-size:1rem;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;justify-content:center;gap:.5rem;min-width:120px;text-align:center}.btn[_ngcontent-%COMP%]:hover{background:#3a5a80;transform:translateY(-1px);box-shadow:0 4px 12px #4a6fa54d}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border:none;border-radius:8px;padding:.75rem 1.5rem;font-size:1rem;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;justify-content:center;gap:.5rem;min-width:120px;text-align:center}.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268;transform:translateY(-1px);box-shadow:0 4px 12px #6c757d4d}.btn-success[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn-success[_ngcontent-%COMP%]:hover{background:#218838;transform:translateY(-1px);box-shadow:0 4px 12px #28a7454d}.btn-warning[_ngcontent-%COMP%]{background:#ffc107;color:#212529}.btn-warning[_ngcontent-%COMP%]:hover{background:#e0a800;transform:translateY(-1px);box-shadow:0 4px 12px #ffc1074d}.btn-small[_ngcontent-%COMP%]{background:#4a6fa5;color:#fff;border:none;border-radius:6px;padding:.4rem .8rem;font-size:.8rem;cursor:pointer;transition:all .2s ease}.btn-small[_ngcontent-%COMP%]:hover{background:#3a5a80}.btn-categoria[_ngcontent-%COMP%]{background:#f8f9fa;color:#495057;border:1px solid #dee2e6;padding:5px 12px;border-radius:6px;cursor:pointer;font-size:12px;transition:all .3s}.btn-categoria[_ngcontent-%COMP%]:hover{background:#e9ecef;border-color:#adb5bd}.btn-categoria-activo[_ngcontent-%COMP%]{background:#007bff;color:#fff;border:1px solid #007bff;padding:5px 12px;border-radius:6px;cursor:pointer;font-size:12px;transition:all .3s}.btn-categoria-activo[_ngcontent-%COMP%]:hover{background:#0056b3;border-color:#0056b3}.btn-small[_ngcontent-%COMP%]{background:#28a745;color:#fff;border:none;padding:4px 8px;border-radius:4px;cursor:pointer;font-size:12px;font-weight:700;transition:background .3s}.btn-small[_ngcontent-%COMP%]:hover{background:#218838}.btn-cancelar[_ngcontent-%COMP%]{background:#e74c3c;color:#fff;border:none;border-radius:8px;padding:.75rem 1.5rem;font-size:1rem;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;justify-content:center;gap:.5rem;min-width:120px;text-align:center}.btn-cancelar[_ngcontent-%COMP%]:hover{background:#c0392b;transform:translateY(-1px);box-shadow:0 4px 12px #e74c3c4d}.modal-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-top:1.5rem}.modal-buttons.four-buttons[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr}.modal-buttons.three-buttons[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr}.modal-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%], .modal-buttons[_ngcontent-%COMP%]   .btn-cancelar[_ngcontent-%COMP%]{width:100%;justify-self:stretch}@media (max-width: 480px){.modal-buttons[_ngcontent-%COMP%], .modal-buttons.four-buttons[_ngcontent-%COMP%], .modal-buttons.three-buttons[_ngcontent-%COMP%]{grid-template-columns:1fr}}.btn-database[_ngcontent-%COMP%]{background:#34495e;color:#fff;border:none;border-radius:8px;padding:.5rem 1rem;margin-right:.5rem;font-size:.9rem;cursor:pointer;transition:all .2s ease}.btn-database[_ngcontent-%COMP%]:hover{background:#2c3e50}.btn-grafica[_ngcontent-%COMP%]{background:#9b59b6;color:#fff;border:none;border-radius:8px;padding:.5rem 1rem;font-size:.9rem;cursor:pointer;transition:all .2s ease}.btn-grafica[_ngcontent-%COMP%]:hover{background:#8e44ad}.reports-section[_ngcontent-%COMP%]{margin:2rem 0;background:var(--bg-primary);border-radius:12px;padding:2rem;box-shadow:var(--shadow)}.reports-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-primary);margin-bottom:2rem;text-align:center;font-size:1.8rem}.date-filter[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:10px;padding:2rem;margin-bottom:2rem;border:1px solid var(--border-color);max-width:800px;margin-left:auto;margin-right:auto}.date-inputs[_ngcontent-%COMP%]{display:flex;gap:2rem;margin-bottom:2rem;justify-content:center;align-items:end;flex-wrap:wrap}.date-input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem;min-width:220px;flex:1;max-width:300px}.date-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary);font-size:.9rem}.date-input-group[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{padding:.75rem;border:2px solid var(--border-color);border-radius:8px;font-size:1rem;background:var(--bg-primary);color:var(--text-primary);transition:all .2s ease}.date-input-group[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus{outline:none;border-color:#4a6fa5;box-shadow:0 0 0 3px #4a6fa51a}.report-buttons[_ngcontent-%COMP%]{display:flex;gap:1.5rem;justify-content:center;align-items:center;flex-wrap:wrap}.report-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%], .report-buttons[_ngcontent-%COMP%]   .btn-grafica[_ngcontent-%COMP%]{padding:.875rem 2rem;font-size:1rem;font-weight:600;border-radius:10px;transition:all .2s ease;min-width:160px;text-align:center}.report-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.report-buttons[_ngcontent-%COMP%]   .btn-grafica[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #9b59b64d}.tabla-detalles-reporte[_ngcontent-%COMP%]{margin-top:2rem;background:var(--bg-primary);border-radius:10px;overflow:hidden;box-shadow:var(--shadow)}.tabla-detalles-reporte[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{background:var(--bg-secondary);color:var(--text-primary);padding:1rem 1.5rem;margin:0;font-size:1.2rem;font-weight:600;border-bottom:1px solid var(--border-color)}.tabla-reporte[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.9rem}.tabla-reporte[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;color:var(--text-primary);padding:1rem;text-align:left;font-weight:600;border-bottom:2px solid var(--border-color)}.tabla-reporte[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;border-bottom:1px solid var(--border-color);color:var(--text-primary)}.tabla-reporte[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--bg-secondary)}.tabla-reporte[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#f8f9fa80}.tabla-reporte[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n):hover{background:var(--bg-secondary)}.mesas-section[_ngcontent-%COMP%], .pedidos-especiales-section[_ngcontent-%COMP%]{margin:2rem 0}.pedidos-especiales-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:2rem;max-width:1200px;margin:0 auto;padding:0 1rem}.mesas-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(50px,1fr));gap:.8rem;max-width:100%;padding:1rem;justify-items:center;justify-content:center;margin:0 auto}.btn-pedido-especial[_ngcontent-%COMP%]{background:#17a2b8;color:#fff;border:none;border-radius:8px;padding:1rem;font-size:1rem;font-weight:700;cursor:pointer;transition:all .2s ease;width:100%;text-align:center}.btn-pedido-especial[_ngcontent-%COMP%]:hover{background:#138496;transform:translateY(-1px)}.summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:1rem;margin:2rem 0}.summary-card[_ngcontent-%COMP%]{background:var(--bg-primary);border:2px solid var(--border-color);border-radius:12px;padding:1.5rem;text-align:center;box-shadow:var(--shadow);transition:all .2s ease;min-height:120px;display:flex;flex-direction:column;justify-content:center}#resumenCuadros.summary-cards[_ngcontent-%COMP%]{display:grid!important;grid-template-columns:repeat(auto-fit,minmax(180px,1fr))!important;gap:1rem!important;margin:2rem 0!important;justify-content:center}@media (max-width: 768px){.reports-section[_ngcontent-%COMP%]{padding:1rem;margin:1rem 0}.date-inputs[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.date-input-group[_ngcontent-%COMP%]{min-width:100%}.report-buttons[_ngcontent-%COMP%]{flex-direction:column}.report-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%], .report-buttons[_ngcontent-%COMP%]   .btn-grafica[_ngcontent-%COMP%]{width:100%;text-align:center}.tabla-reporte[_ngcontent-%COMP%]{font-size:.8rem}.tabla-reporte[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .tabla-reporte[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem}#resumenCuadros.summary-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(150px,1fr))!important}}#resumenCuadros[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{min-height:120px!important;display:flex!important;flex-direction:column!important;justify-content:center!important;padding:1.5rem!important}#resumenCuadros[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{font-size:1rem!important;font-weight:600!important;margin-bottom:.5rem!important;display:block!important}#resumenCuadros[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem!important;font-weight:700!important;color:inherit!important}.summary-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #00000026}.summary-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1rem;color:var(--text-primary)}.summary-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--text-primary)}.summary-card.efectivo[_ngcontent-%COMP%], .summary-card.verde[_ngcontent-%COMP%]{background:#d4edda;border-color:#28a745;color:#155724}.summary-card.efectivo[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .summary-card.verde[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .summary-card.efectivo[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%], .summary-card.verde[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#155724}.summary-card.yape[_ngcontent-%COMP%], .summary-card.morado[_ngcontent-%COMP%]{background:#e2d9f3;border-color:#6f42c1;color:#3d1a78}.summary-card.yape[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .summary-card.morado[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .summary-card.yape[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%], .summary-card.morado[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#3d1a78}.summary-card.tarjeta[_ngcontent-%COMP%], .summary-card.azul[_ngcontent-%COMP%]{background:#cce7ff;border-color:#007bff;color:#004085}.summary-card.tarjeta[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .summary-card.azul[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .summary-card.tarjeta[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%], .summary-card.azul[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#004085}.summary-card.total-dia[_ngcontent-%COMP%], .summary-card.ganancia[_ngcontent-%COMP%], .summary-card.naranja[_ngcontent-%COMP%]{background:#fff3cd;border-color:#ffc107;color:#856404}.summary-card.total-dia[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .summary-card.ganancia[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .summary-card.naranja[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .summary-card.total-dia[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%], .summary-card.ganancia[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%], .summary-card.naranja[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#856404}.tabla-pedidos-especiales[_ngcontent-%COMP%]{width:100%;margin-top:1rem;background:var(--bg-primary);border-radius:8px;overflow:hidden;box-shadow:var(--shadow)}.mesa-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100px;height:100px;border:3px solid var(--border-color, #ddd);border-radius:16px;background-color:var(--bg-primary, #fff);cursor:pointer;transition:all .3s ease;padding:.6rem;position:relative;overflow:hidden;box-shadow:0 2px 8px #0000001a;aspect-ratio:1}.mesa-btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px) scale(1.02);box-shadow:0 8px 25px #0003;border-width:4px}.mesa-num[_ngcontent-%COMP%]{font-weight:800;font-size:1.1rem;color:var(--text-primary);margin-bottom:.3rem;text-shadow:0 1px 2px rgba(0,0,0,.1)}.mesa-monto[_ngcontent-%COMP%]{font-size:.75rem;text-align:center;color:var(--text-secondary);font-weight:600;line-height:1.2}.mesa-btn.mesa-libre[_ngcontent-%COMP%]{background:#a8e6cf!important;border-color:#7dd3a0!important;color:#2d5a3d!important;box-shadow:0 2px 6px #a8e6cf4d!important}.mesa-btn.mesa-libre[_ngcontent-%COMP%]   .mesa-num[_ngcontent-%COMP%]{color:#2d5a3d!important;font-weight:900!important}.mesa-btn.mesa-libre[_ngcontent-%COMP%]   .mesa-monto[_ngcontent-%COMP%]{color:#2d5a3d!important}.mesa-btn.mesa-libre[_ngcontent-%COMP%]:hover{background:#7dd3a0!important;border-color:#5cb85c!important;box-shadow:0 4px 10px #a8e6cf66!important}.mesa-btn.mesa-ocupada[_ngcontent-%COMP%]{background:#ffb3ba!important;border-color:#ff8a95!important;color:#8b2635!important;box-shadow:0 2px 6px #ffb3ba4d!important}.mesa-btn.mesa-ocupada[_ngcontent-%COMP%]   .mesa-num[_ngcontent-%COMP%]{color:#8b2635!important;font-weight:900!important}.mesa-btn.mesa-ocupada[_ngcontent-%COMP%]   .mesa-monto[_ngcontent-%COMP%]{color:#8b2635!important}.mesa-btn.mesa-ocupada[_ngcontent-%COMP%]:hover{background:#ff8a95!important;border-color:#e74c3c!important;box-shadow:0 4px 10px #ffb3ba66!important}.mesa-btn.mesa-parcial[_ngcontent-%COMP%]{background:#ffe4b5!important;border-color:#ffd280!important;color:#8b5a00!important;box-shadow:0 2px 6px #ffe4b54d!important}.mesa-btn.mesa-parcial[_ngcontent-%COMP%]   .mesa-num[_ngcontent-%COMP%]{color:#8b5a00!important;font-weight:900!important}.mesa-btn.mesa-parcial[_ngcontent-%COMP%]   .mesa-monto[_ngcontent-%COMP%]{color:#8b5a00!important}.mesa-btn.mesa-parcial[_ngcontent-%COMP%]:hover{background:#ffd280!important;border-color:#f39c12!important;box-shadow:0 4px 10px #ffe4b566!important}.mesa-dividida[_ngcontent-%COMP%]{position:relative;border:2px dashed rgba(108,117,125,.6)!important}.mesa-dividida[_ngcontent-%COMP%]:after{content:"\\2702";position:absolute;top:4px;right:4px;font-size:12px;opacity:.7;color:#6c757d}.pedido-especial-box[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8f9fa);border:2px solid #e9ecef;border-radius:16px;padding:1.5rem;box-shadow:0 4px 20px #00000014;transition:all .3s ease;animation:_ngcontent-%COMP%_slideInUp .5s ease}.pedido-especial-box[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 30px #0000001f;border-color:#4a6fa5}.pedido-box[_ngcontent-%COMP%]{background:var(--bg-primary);border:2px solid var(--border-color);border-radius:12px;padding:1.5rem;box-shadow:var(--shadow)}.pedido-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary);margin-bottom:1rem;font-size:1.2rem}.estado-pendiente[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:4px 8px;border-radius:4px;font-size:.85em;font-weight:700}.estado-parcial[_ngcontent-%COMP%]{background:#fff3cd;color:#856404;padding:4px 8px;border-radius:4px;font-size:.85em;font-weight:700}.estado-pagado[_ngcontent-%COMP%]{background:#d4edda;color:#155724;padding:4px 8px;border-radius:4px;font-size:.85em;font-weight:700}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:2000;padding:1rem}.modal-content[_ngcontent-%COMP%]{background:var(--bg-primary);border-radius:12px;padding:2rem;max-width:500px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 10px 40px #0000004d;border:1px solid var(--border-color)}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary);margin-bottom:1rem;font-size:1.3rem}.sugerencias-container[_ngcontent-%COMP%]{position:absolute;background:var(--bg-primary);border:2px solid var(--border-color);border-radius:8px;max-height:200px;overflow-y:auto;z-index:1000;box-shadow:var(--shadow);width:100%}.producto-sugerencia[_ngcontent-%COMP%]{padding:.75rem;cursor:pointer;border-bottom:1px solid var(--border-color);color:var(--text-primary);transition:background .2s ease}.producto-sugerencia[_ngcontent-%COMP%]:hover{background:var(--bg-secondary)}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:1rem 0;background:var(--bg-primary);border-radius:8px;overflow:hidden;box-shadow:var(--shadow)}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:.75rem;text-align:left;border-bottom:1px solid var(--border-color);color:var(--text-primary)}th[_ngcontent-%COMP%]{background:var(--bg-secondary);font-weight:600}tr[_ngcontent-%COMP%]:hover{background:var(--bg-secondary)}.btn-medio[_ngcontent-%COMP%]{padding:.5rem 1rem;border:2px solid var(--border-color);border-radius:8px;background:var(--bg-primary);color:var(--text-primary);cursor:pointer;transition:all .2s ease;font-size:.9rem}.btn-medio[_ngcontent-%COMP%]:hover{background:var(--bg-secondary)}.btn-medio.selected[_ngcontent-%COMP%]{background:#4a6fa5;color:#fff;border-color:#4a6fa5}.btn-efectivo.selected[_ngcontent-%COMP%]{background:#28a745;border-color:#28a745}.btn-yape.selected[_ngcontent-%COMP%]{background:#6f42c1;border-color:#6f42c1}.btn-tarjeta.selected[_ngcontent-%COMP%]{background:#fd7e14;border-color:#fd7e14}.loading[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:var(--text-secondary);font-size:1.1rem}@media (min-width: 768px){.brand-text[_ngcontent-%COMP%], .date-display[_ngcontent-%COMP%]{display:inline}.navbar-menu[_ngcontent-%COMP%]{display:flex}.mobile-menu-btn[_ngcontent-%COMP%]{display:none}.mesas-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(6,1fr);max-width:650px;margin:2rem auto;gap:1rem}.mesa-btn[_ngcontent-%COMP%]{width:105px;height:105px}.summary-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr);max-width:1000px;margin:2rem auto}#resumenCuadros.summary-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)!important;max-width:1000px!important;margin:2rem auto!important}.pedidos-especiales-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:2rem;max-width:900px}.main-container[_ngcontent-%COMP%]{padding:2rem}}@media (min-width: 1024px){.mesas-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(8,1fr);max-width:900px;gap:1.2rem}.mesa-btn[_ngcontent-%COMP%]{width:110px;height:110px}.mesa-num[_ngcontent-%COMP%]{font-size:1.2rem}.navbar-container[_ngcontent-%COMP%]{padding:0 2rem}.navbar-controls[_ngcontent-%COMP%]{gap:1rem}}@media (max-width: 767px){.main-container[_ngcontent-%COMP%]{padding:1rem .5rem}.form-section[_ngcontent-%COMP%]{padding:1rem;margin-bottom:1rem}.mesas-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr);gap:.6rem;padding:.5rem;max-width:350px}.mesa-btn[_ngcontent-%COMP%]{width:80px;height:80px;padding:.4rem}.mesa-num[_ngcontent-%COMP%]{font-size:.9rem}.mesa-monto[_ngcontent-%COMP%]{font-size:.7rem}.modal-content[_ngcontent-%COMP%]{padding:1rem;margin:.5rem}.btn[_ngcontent-%COMP%]{padding:.6rem 1rem;font-size:.9rem}.pedidos-especiales-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem;padding:.5rem}.pedido-especial-box[_ngcontent-%COMP%]{padding:1rem}}h2[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:700;font-size:1.8rem;text-align:center;margin:1rem 0;text-shadow:0 2px 4px rgba(0,0,0,.1);position:relative}h2[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-8px;left:50%;transform:translate(-50%);width:80px;height:3px;background:linear-gradient(135deg,#4a6fa5,#3a5a80);border-radius:2px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.modal-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease}.pedido-especial-box[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .5s ease}.producto-sugerencia[_ngcontent-%COMP%]{padding:12px 15px;cursor:pointer;border-bottom:1px solid #eee;transition:all .2s ease;display:flex;flex-direction:column;gap:4px}.producto-sugerencia[_ngcontent-%COMP%]:hover, .producto-sugerencia.selected[_ngcontent-%COMP%]{background-color:#f8f9fa;border-left:3px solid #007bff}.producto-sugerencia.selected[_ngcontent-%COMP%]{background-color:#e3f2fd}.producto-sugerencia[_ngcontent-%COMP%]:last-child{border-bottom:none}.producto-sugerencia[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:14px;color:#333}.producto-sugerencia[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px;color:#666;display:flex;justify-content:space-between;align-items:center}#productoInput[_ngcontent-%COMP%]{transition:border-color .2s ease,box-shadow .2s ease}#productoInput[_ngcontent-%COMP%]:focus{border-color:#007bff!important;box-shadow:0 0 0 2px #007bff40!important;outline:none}.text-center[_ngcontent-%COMP%]{text-align:center}.mt-2[_ngcontent-%COMP%]{margin-top:1rem}.mb-2[_ngcontent-%COMP%]{margin-bottom:1rem}.hidden[_ngcontent-%COMP%]{display:none}.flex[_ngcontent-%COMP%]{display:flex}.flex-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.gap-1[_ngcontent-%COMP%]{gap:.5rem}.gap-2[_ngcontent-%COMP%]{gap:1rem}']})};export{Me as HomeComponent};
